<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Viability Analyzer - Free Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">üöÄ Business Viability Analyzer</h1>
            <p class="text-gray-600">AI-powered analysis of business success probability - 100% Free</p>
            <div class="mt-3 bg-green-50 border border-green-200 rounded-lg p-3 flex items-center justify-between flex-wrap gap-3">
                <p class="text-sm text-green-800">‚úì No API key needed ¬∑ ‚úì No credit card ¬∑ ‚úì Completely free to use</p>
                <a href="market-live.html" target="_blank" style="background:#e84b3a;color:white;padding:8px 16px;border-radius:8px;font-size:0.8rem;font-weight:600;text-decoration:none;display:flex;align-items:center;gap:6px;">
                    <span style="width:7px;height:7px;background:#fff;border-radius:50%;animation:pulse2 1.5s infinite;display:inline-block;"></span>
                    Live Market Intel
                </a>
            </div>
            <style>@keyframes pulse2{0%,100%{opacity:1}50%{opacity:0.4}}</style>
        </div>

        <!-- Input Form -->
        <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">Enter Your Business Idea</h2>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Business Concept</label>
                    <textarea 
                        id="businessIdea" 
                        rows="3" 
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                        placeholder="e.g., An eco-friendly coffee shop that also sells sustainable products"
                    ></textarea>
                </div>

                <!-- Country Dropdown -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Target Country/Region</label>
                    <div class="relative">
                        <input type="text" id="country" autocomplete="off"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                            placeholder="Type or select a country..."
                            oninput="filterDropdown('country', 'countryList')"
                            onfocus="showDropdown('countryList')"
                        />
                        <div id="countryList" class="hidden absolute z-20 w-full bg-white border border-gray-200 rounded-lg shadow-xl mt-1 max-h-64 overflow-y-auto">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                    <p class="text-xs text-gray-400 mt-1">50+ countries supported with specific competitor data</p>
                </div>

                <!-- Sector Dropdown -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Industry/Sector <span class="text-indigo-500">(Select for best results)</span></label>
                    <div class="relative">
                        <input type="text" id="industry" autocomplete="off"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                            placeholder="Type or select a sector..."
                            oninput="filterDropdown('industry', 'sectorList')"
                            onfocus="showDropdown('sectorList')"
                        />
                        <div id="sectorList" class="hidden absolute z-20 w-full bg-white border border-gray-200 rounded-lg shadow-xl mt-1 max-h-64 overflow-y-auto">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                    <p class="text-xs text-gray-400 mt-1">13 sectors with 10-15 real competitors each</p>
                </div>

                <!-- Selected tags display -->
                <div id="selectedTags" class="hidden flex flex-wrap gap-2"></div>

                <button 
                    id="analyzeBtn"
                    class="w-full bg-indigo-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-indigo-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"
                >
                    Analyze Business Viability (Free)
                </button>
            </div>
        </div>

        <style>
            .dropdown-item {
                padding: 10px 14px;
                cursor: pointer;
                font-size: 0.875rem;
                color: #374151;
                display: flex;
                align-items: center;
                gap: 8px;
                border-bottom: 1px solid #f3f4f6;
                transition: background 0.15s;
            }
            .dropdown-item:hover { background: #eef2ff; color: #4338ca; }
            .dropdown-group {
                padding: 6px 14px 4px;
                font-size: 0.65rem;
                font-weight: 700;
                letter-spacing: 0.1em;
                text-transform: uppercase;
                color: #9ca3af;
                background: #f9fafb;
                border-bottom: 1px solid #e5e7eb;
                position: sticky;
                top: 0;
            }
            .dropdown-item .item-flag { font-size: 1.1rem; }
            .dropdown-item .item-icon { font-size: 1rem; }
        </style>

        <script>
        const COUNTRIES = [
            { group: 'üåç Asia Pacific', items: [
                { flag: 'üáÆüá≥', name: 'India', key: 'india' },
                { flag: 'üá®üá≥', name: 'China', key: 'china' },
                { flag: 'üáØüáµ', name: 'Japan', key: 'japan' },
                { flag: 'üá∏üá¨', name: 'Singapore', key: 'singapore' },
                { flag: 'üá≤üáæ', name: 'Malaysia', key: 'malaysia' },
                { flag: 'üáÆüá©', name: 'Indonesia', key: 'indonesia' },
                { flag: 'üáπüá≠', name: 'Thailand', key: 'thailand' },
                { flag: 'üáµüá≠', name: 'Philippines', key: 'philippines' },
                { flag: 'üáªüá≥', name: 'Vietnam', key: 'vietnam' },
                { flag: 'üá¶üá∫', name: 'Australia', key: 'australia' },
                { flag: 'üá≥üáø', name: 'New Zealand', key: 'new zealand' },
                { flag: 'üá∞üá∑', name: 'South Korea', key: 'south korea' },
                { flag: 'üá≠üá∞', name: 'Hong Kong', key: 'hong kong' },
                { flag: 'üáßüá©', name: 'Bangladesh', key: 'bangladesh' },
                { flag: 'üáµüá∞', name: 'Pakistan', key: 'pakistan' },
            ]},
            { group: 'üåé Americas', items: [
                { flag: 'üá∫üá∏', name: 'United States', key: 'united states' },
                { flag: 'üá®üá¶', name: 'Canada', key: 'canada' },
                { flag: 'üáßüá∑', name: 'Brazil', key: 'brazil' },
                { flag: 'üá≤üáΩ', name: 'Mexico', key: 'mexico' },
                { flag: 'üá¶üá∑', name: 'Argentina', key: 'argentina' },
                { flag: 'üá®üá¥', name: 'Colombia', key: 'colombia' },
                { flag: 'üá®üá±', name: 'Chile', key: 'chile' },
                { flag: 'üáµüá™', name: 'Peru', key: 'peru' },
            ]},
            { group: 'üåç Europe', items: [
                { flag: 'üá¨üáß', name: 'United Kingdom', key: 'uk' },
                { flag: 'üá©üá™', name: 'Germany', key: 'germany' },
                { flag: 'üá´üá∑', name: 'France', key: 'france' },
                { flag: 'üáÆüáπ', name: 'Italy', key: 'italy' },
                { flag: 'üá™üá∏', name: 'Spain', key: 'spain' },
                { flag: 'üá≥üá±', name: 'Netherlands', key: 'netherlands' },
                { flag: 'üá∏üá™', name: 'Sweden', key: 'sweden' },
                { flag: 'üá®üá≠', name: 'Switzerland', key: 'switzerland' },
                { flag: 'üáµüá±', name: 'Poland', key: 'poland' },
                { flag: 'üáßüá™', name: 'Belgium', key: 'belgium' },
                { flag: 'üá¶üáπ', name: 'Austria', key: 'austria' },
                { flag: 'üá©üá∞', name: 'Denmark', key: 'denmark' },
                { flag: 'üá´üáÆ', name: 'Finland', key: 'finland' },
                { flag: 'üá≥üá¥', name: 'Norway', key: 'norway' },
                { flag: 'üáµüáπ', name: 'Portugal', key: 'portugal' },
            ]},
            { group: 'üåç Middle East & Africa', items: [
                { flag: 'üá¶üá™', name: 'UAE', key: 'uae' },
                { flag: 'üá∏üá¶', name: 'Saudi Arabia', key: 'saudi arabia' },
                { flag: 'üá∂üá¶', name: 'Qatar', key: 'qatar' },
                { flag: 'üá∞üáº', name: 'Kuwait', key: 'kuwait' },
                { flag: 'üáÆüá±', name: 'Israel', key: 'israel' },
                { flag: 'üáøüá¶', name: 'South Africa', key: 'south africa' },
                { flag: 'üá≥üá¨', name: 'Nigeria', key: 'nigeria' },
                { flag: 'üá∞üá™', name: 'Kenya', key: 'kenya' },
                { flag: 'üá™üá¨', name: 'Egypt', key: 'egypt' },
                { flag: 'üáπüáø', name: 'Tanzania', key: 'tanzania' },
                { flag: 'üá¨üá≠', name: 'Ghana', key: 'ghana' },
            ]},
            { group: 'üåç Regions', items: [
                { flag: 'üåç', name: 'Europe (EU)', key: 'europe' },
                { flag: 'üåè', name: 'Southeast Asia', key: 'southeast asia' },
                { flag: 'üåç', name: 'Middle East', key: 'middle east' },
                { flag: 'üåç', name: 'Sub-Saharan Africa', key: 'africa' },
                { flag: 'üåé', name: 'Latin America', key: 'latin america' },
            ]},
        ];

        const SECTORS = [
            { group: 'üí∞ Financial Services', items: [
                { icon: 'üí≥', name: 'Payment Gateway / Fintech', key: 'payment gateway fintech' },
                { icon: 'üè¶', name: 'Digital Banking / Neobank', key: 'digital banking neobank' },
                { icon: 'üìà', name: 'Investment / Trading Platform', key: 'investment trading' },
                { icon: 'üîí', name: 'Insurance / Insurtech', key: 'insurance insurtech' },
                { icon: 'üí∏', name: 'Lending / Credit / BNPL', key: 'lending credit bnpl' },
                { icon: 'üí±', name: 'Crypto / Blockchain / Web3', key: 'crypto blockchain' },
            ]},
            { group: '‚ö° Energy & Utilities', items: [
                { icon: '‚õΩ', name: 'Commercial Gas Distribution', key: 'commercial gas distribution' },
                { icon: 'üè†', name: 'Domestic Gas / LPG Supply', key: 'domestic gas lpg' },
                { icon: 'üîå', name: 'Electric Utility / Power', key: 'electric utility power' },
                { icon: '‚òÄÔ∏è', name: 'Renewable Energy / Solar', key: 'renewable energy solar' },
                { icon: 'üõ¢Ô∏è', name: 'Oil & Petroleum', key: 'oil petroleum' },
            ]},
            { group: 'üçï Food & Hospitality', items: [
                { icon: '‚òï', name: 'Coffee Shop / Caf√©', key: 'coffee shop cafe' },
                { icon: 'üçΩÔ∏è', name: 'Restaurant / QSR', key: 'restaurant qsr' },
                { icon: 'üõµ', name: 'Food Delivery Service', key: 'food delivery' },
                { icon: 'üç∫', name: 'Bar / Pub / Nightlife', key: 'bar pub nightlife' },
                { icon: 'üç∞', name: 'Bakery / Pastry / Desserts', key: 'bakery pastry' },
                { icon: 'üßë‚Äçüç≥', name: 'Cloud Kitchen / Ghost Kitchen', key: 'cloud kitchen' },
                { icon: 'üè®', name: 'Hotel / Hospitality', key: 'hotel hospitality' },
            ]},
            { group: 'üíª Technology', items: [
                { icon: 'ü§ñ', name: 'AI / Machine Learning', key: 'ai machine learning' },
                { icon: 'üì¶', name: 'SaaS / Software', key: 'saas software' },
                { icon: 'üì±', name: 'Mobile App', key: 'mobile app' },
                { icon: 'üõ°Ô∏è', name: 'Cybersecurity', key: 'cybersecurity' },
                { icon: '‚òÅÔ∏è', name: 'Cloud Computing', key: 'cloud computing' },
                { icon: 'üéÆ', name: 'Gaming / Esports', key: 'gaming esports' },
                { icon: 'ü•Ω', name: 'AR / VR / Metaverse', key: 'ar vr metaverse' },
                { icon: 'üîó', name: 'IoT / Hardware / Devices', key: 'iot hardware devices' },
            ]},
            { group: 'üõí Retail & Commerce', items: [
                { icon: 'üõçÔ∏è', name: 'E-commerce / Online Marketplace', key: 'ecommerce online marketplace' },
                { icon: 'üè™', name: 'Physical Retail / Brick & Mortar', key: 'physical retail' },
                { icon: 'üëó', name: 'Fashion / Apparel', key: 'fashion apparel' },
                { icon: 'üíÑ', name: 'Beauty / Cosmetics / Personal Care', key: 'beauty cosmetics' },
                { icon: 'üß∏', name: 'Consumer Electronics', key: 'consumer electronics' },
                { icon: 'üåø', name: 'Grocery / Supermarket', key: 'grocery supermarket' },
            ]},
            { group: 'üè• Healthcare & Life Sciences', items: [
                { icon: 'üè•', name: 'Hospital / Clinic / Medical Center', key: 'hospital clinic' },
                { icon: 'üíä', name: 'Pharmacy / Medtech', key: 'pharmacy medtech' },
                { icon: 'üß¨', name: 'Biotech / Life Sciences', key: 'biotech life sciences' },
                { icon: 'üì±', name: 'Digital Health / Telemedicine', key: 'digital health telemedicine' },
                { icon: 'ü¶∑', name: 'Dental / Aesthetic Medicine', key: 'dental aesthetic' },
                { icon: 'üß†', name: 'Mental Health / Wellness', key: 'mental health wellness' },
            ]},
            { group: 'üì¶ Logistics & Supply Chain', items: [
                { icon: 'üöö', name: 'Courier / Last-Mile Delivery', key: 'courier delivery' },
                { icon: 'üè≠', name: 'Warehousing / Fulfillment', key: 'warehousing fulfillment' },
                { icon: '‚úàÔ∏è', name: 'Freight / Shipping / 3PL', key: 'freight shipping 3pl' },
                { icon: 'üõí', name: 'Quick Commerce / Instant Delivery', key: 'quick commerce instant delivery' },
            ]},
            { group: 'üè† Real Estate & Construction', items: [
                { icon: 'üè†', name: 'Residential Real Estate', key: 'residential real estate' },
                { icon: 'üè¢', name: 'Commercial Real Estate', key: 'commercial real estate' },
                { icon: 'üèóÔ∏è', name: 'Construction / Contracting', key: 'construction contracting' },
                { icon: 'üèòÔ∏è', name: 'Proptech / Real Estate Tech', key: 'proptech real estate tech' },
            ]},
            { group: 'üìö Education & Media', items: [
                { icon: 'üéì', name: 'EdTech / Online Learning', key: 'edtech online learning' },
                { icon: 'üè´', name: 'School / Tutoring / Coaching', key: 'school tutoring' },
                { icon: 'üì∫', name: 'Media / Entertainment / Streaming', key: 'media entertainment streaming' },
                { icon: 'üéµ', name: 'Music / Podcast / Creator Economy', key: 'music podcast creator' },
            ]},
            { group: 'ü§ù Professional Services', items: [
                { icon: 'üìä', name: 'Management Consulting', key: 'management consulting' },
                { icon: '‚öñÔ∏è', name: 'Legal Services / LegalTech', key: 'legal services legaltech' },
                { icon: 'üíº', name: 'HR / Staffing / Recruitment', key: 'hr staffing recruitment' },
                { icon: 'üì£', name: 'Marketing / Advertising Agency', key: 'marketing advertising' },
                { icon: 'üîß', name: 'IT Services / Outsourcing', key: 'it services outsourcing' },
            ]},
            { group: 'üöó Transportation & Mobility', items: [
                { icon: 'üöó', name: 'Ride-hailing / Mobility', key: 'ride hailing mobility' },
                { icon: 'üöå', name: 'Public Transport / Buses', key: 'public transport buses' },
                { icon: 'üö≤', name: 'Micro-mobility / EV / Bikes', key: 'micro mobility ev bikes' },
                { icon: '‚úàÔ∏è', name: 'Aviation / Travel Tech', key: 'aviation travel tech' },
            ]},
            { group: 'üåæ Agriculture & Environment', items: [
                { icon: 'üåæ', name: 'AgriTech / Farming', key: 'agritech farming' },
                { icon: 'üå±', name: 'CleanTech / Sustainability', key: 'cleantech sustainability' },
                { icon: '‚ôªÔ∏è', name: 'Waste Management / Recycling', key: 'waste management recycling' },
            ]},
        ];

        function buildDropdown(listId, data) {
            const el = document.getElementById(listId);
            el.innerHTML = data.map(group => `
                <div class="dropdown-group">${group.group}</div>
                ${group.items.map(item => `
                    <div class="dropdown-item" onclick="selectDropdown('${listId}', '${item.name}', '${item.key}')">
                        <span class="${listId === 'countryList' ? 'item-flag' : 'item-icon'}">${listId === 'countryList' ? item.flag : item.icon}</span>
                        <span>${item.name}</span>
                    </div>
                `).join('')}
            `).join('');
        }

        function showDropdown(listId) {
            document.getElementById(listId).classList.remove('hidden');
            const data = listId === 'countryList' ? COUNTRIES : SECTORS;
            buildDropdown(listId, data);
            // Close other dropdown
            const other = listId === 'countryList' ? 'sectorList' : 'countryList';
            document.getElementById(other).classList.add('hidden');
        }

        function filterDropdown(inputId, listId) {
            const val = document.getElementById(inputId).value.toLowerCase();
            const data = listId === 'countryList' ? COUNTRIES : SECTORS;
            const filtered = data.map(group => ({
                ...group,
                items: group.items.filter(item => item.name.toLowerCase().includes(val) || item.key.includes(val))
            })).filter(g => g.items.length > 0);
            document.getElementById(listId).classList.remove('hidden');
            buildDropdown(listId, filtered.length ? filtered : data);
        }

        function selectDropdown(listId, name, key) {
            const inputId = listId === 'countryList' ? 'country' : 'industry';
            document.getElementById(inputId).value = name;
            document.getElementById(listId).classList.add('hidden');
            updateSelectedTags();
        }

        function updateSelectedTags() {
            const country = document.getElementById('country').value;
            const industry = document.getElementById('industry').value;
            const tagsEl = document.getElementById('selectedTags');
            tagsEl.innerHTML = '';
            if (country || industry) {
                tagsEl.classList.remove('hidden');
                if (country) tagsEl.innerHTML += `<span style="background:#e0e7ff;color:#3730a3;padding:4px 12px;border-radius:20px;font-size:0.78rem;font-weight:500;">üåç ${country}</span>`;
                if (industry) tagsEl.innerHTML += `<span style="background:#d1fae5;color:#065f46;padding:4px 12px;border-radius:20px;font-size:0.78rem;font-weight:500;">üè¢ ${industry}</span>`;
            } else {
                tagsEl.classList.add('hidden');
            }
        }

        // Close dropdowns on outside click
        document.addEventListener('click', (e) => {
            if (!e.target.closest('#country') && !e.target.closest('#countryList'))
                document.getElementById('countryList').classList.add('hidden');
            if (!e.target.closest('#industry') && !e.target.closest('#sectorList'))
                document.getElementById('sectorList').classList.add('hidden');
        });
        </script>

        <!-- Loading State -->
        <div id="loading" class="hidden bg-white rounded-xl shadow-lg p-8 mb-6">
            <div class="flex items-center justify-center space-x-3">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
                <p class="text-gray-600 font-medium">Analyzing your business idea...</p>
            </div>
            <p class="text-sm text-gray-500 mt-4 text-center">Using AI to evaluate market potential, competition, and success factors...</p>
        </div>

        <!-- Results Container -->
        <div id="results" class="hidden space-y-6">
            <!-- Success Score -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">Success Probability Score</h2>
                <div class="flex items-center justify-center mb-4">
                    <div class="relative w-48 h-48">
                        <svg class="transform -rotate-90 w-48 h-48">
                            <circle cx="96" cy="96" r="88" stroke="#e5e7eb" stroke-width="16" fill="none"/>
                            <circle id="scoreCircle" cx="96" cy="96" r="88" stroke="#4f46e5" stroke-width="16" fill="none"
                                stroke-dasharray="552.92" stroke-dashoffset="552.92" stroke-linecap="round"/>
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="text-center">
                                <div id="scoreValue" class="text-5xl font-bold text-gray-800">--</div>
                                <div class="text-sm text-gray-500">out of 100</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="scoreInterpretation" class="text-center text-gray-600 font-medium"></div>
            </div>

            <!-- Market Size & Metrics -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-6">üìä Market Size & Metrics</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-blue-50 rounded-lg p-4">
                        <div class="text-sm text-blue-600 font-medium mb-1">Total Market Size</div>
                        <div id="marketSize" class="text-2xl font-bold text-blue-900">--</div>
                        <div class="text-xs text-blue-700 mt-1">Annual value</div>
                    </div>
                    <div class="bg-green-50 rounded-lg p-4">
                        <div class="text-sm text-green-600 font-medium mb-1">Market Growth Rate</div>
                        <div id="growthRate" class="text-2xl font-bold text-green-900">--</div>
                        <div class="text-xs text-green-700 mt-1">Year-over-year</div>
                    </div>
                    <div class="bg-purple-50 rounded-lg p-4">
                        <div class="text-sm text-purple-600 font-medium mb-1">Target Market Share</div>
                        <div id="targetShare" class="text-2xl font-bold text-purple-900">--</div>
                        <div class="text-xs text-purple-700 mt-1">Achievable in 3-5 years</div>
                    </div>
                </div>
                
                <!-- Market Growth Visualization -->
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-700 mb-3">Market Growth Projection</h4>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <canvas id="marketGrowthChart" height="80"></canvas>
                    </div>
                </div>
                
                <div id="marketAnalysis" class="text-gray-700 prose max-w-none"></div>
            </div>

            <!-- Financial Projections -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-6">üí∞ Financial Projections</h3>
                
                <!-- Revenue vs Expenses Chart -->
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-700 mb-3">Revenue & Profitability Trajectory</h4>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <canvas id="revenueChart" height="80"></canvas>
                    </div>
                </div>
                
                <!-- Startup Costs Breakdown -->
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-700 mb-3">Initial Investment Required</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <div id="startupCosts" class="space-y-2">
                                <!-- Will be populated by JS -->
                            </div>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <canvas id="startupCostsChart"></canvas>
                        </div>
                    </div>
                    <div class="mt-4 p-4 bg-indigo-50 rounded-lg">
                        <div class="flex justify-between items-center">
                            <span class="font-semibold text-indigo-900">Total Startup Capital:</span>
                            <span id="totalStartup" class="text-2xl font-bold text-indigo-900">--</span>
                        </div>
                    </div>
                </div>

                <!-- Revenue Projections -->
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-700 mb-3">Revenue Projections (Monthly)</h4>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-2 text-left">Period</th>
                                    <th class="px-4 py-2 text-right">Revenue</th>
                                    <th class="px-4 py-2 text-right">Expenses</th>
                                    <th class="px-4 py-2 text-right">Net Profit</th>
                                    <th class="px-4 py-2 text-right">Margin</th>
                                </tr>
                            </thead>
                            <tbody id="revenueTable">
                                <!-- Will be populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Key Metrics -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="border-l-4 border-green-500 pl-4">
                        <div class="text-xs text-gray-600 mb-1">Break-Even Point</div>
                        <div id="breakEven" class="text-xl font-bold text-gray-800">--</div>
                    </div>
                    <div class="border-l-4 border-blue-500 pl-4">
                        <div class="text-xs text-gray-600 mb-1">Year 3 Annual Revenue</div>
                        <div id="year3Revenue" class="text-xl font-bold text-gray-800">--</div>
                    </div>
                    <div class="border-l-4 border-purple-500 pl-4">
                        <div class="text-xs text-gray-600 mb-1">ROI (3 years)</div>
                        <div id="roi" class="text-xl font-bold text-gray-800">--</div>
                    </div>
                </div>

                <div id="revenueAnalysis" class="text-gray-700 prose max-w-none"></div>
            </div>

            <!-- Competition Metrics -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-6">üèÜ Competitive Landscape</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="text-center p-4 bg-gray-50 rounded-lg">
                        <div class="text-3xl font-bold text-gray-800" id="competitorCount">--</div>
                        <div class="text-xs text-gray-600 mt-1">Major Competitors</div>
                    </div>
                    <div class="text-center p-4 bg-gray-50 rounded-lg">
                        <div class="text-3xl font-bold text-gray-800" id="marketSaturation">--</div>
                        <div class="text-xs text-gray-600 mt-1">Market Saturation</div>
                    </div>
                    <div class="text-center p-4 bg-gray-50 rounded-lg">
                        <div class="text-3xl font-bold text-gray-800" id="entryBarrier">--</div>
                        <div class="text-xs text-gray-600 mt-1">Entry Barrier</div>
                    </div>
                    <div class="text-center p-4 bg-gray-50 rounded-lg">
                        <div class="text-3xl font-bold text-gray-800" id="competitiveAdvantage">--</div>
                        <div class="text-xs text-gray-600 mt-1">Innovation Potential</div>
                    </div>
                </div>

                <div id="competitionAnalysis" class="text-gray-700 prose max-w-none mb-6"></div>

                <!-- Key Competitors Section -->
                <div class="mt-6 border-t pt-6">
                    <h4 class="font-semibold text-gray-800 mb-4">üéØ Key Competitors to Study</h4>
                    <div id="keyCompetitors" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Will be populated by JS -->
                    </div>
                </div>

                <!-- Competitive Positioning -->
                <div class="mt-6 border-t pt-6">
                    <h4 class="font-semibold text-gray-800 mb-4">üìç How to Differentiate</h4>
                    <div id="differentiationStrategy" class="bg-indigo-50 rounded-lg p-4">
                        <!-- Will be populated by JS -->
                    </div>
                </div>

                <!-- NEW: Market Share Visualization -->
                <div class="mt-6 border-t pt-6">
                    <h4 class="font-semibold text-gray-800 mb-2">üìä Competitor Market Share Distribution</h4>
                    <p class="text-xs text-gray-500 mb-4">Estimated market share split among key players in your sector & country</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-gray-50 rounded-lg p-4">
                            <canvas id="marketSharePieChart" height="220"></canvas>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <canvas id="marketShareBarChart" height="220"></canvas>
                        </div>
                    </div>
                </div>

                <!-- NEW: Competitor Strength Radar -->
                <div class="mt-6 border-t pt-6">
                    <h4 class="font-semibold text-gray-800 mb-2">üï∏Ô∏è Competitive Strength Radar</h4>
                    <p class="text-xs text-gray-500 mb-4">You vs top competitors across key business dimensions</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-gray-50 rounded-lg p-4 flex items-center justify-center">
                            <canvas id="radarChart" height="260" width="260"></canvas>
                        </div>
                        <div id="radarLegend" class="flex flex-col justify-center gap-2 p-4">
                            <!-- Will be populated by JS -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- NEW: Advanced Analytics Section -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-6">üìà Advanced Market Analytics</h3>

                <!-- CAC vs LTV Chart -->
                <div class="mb-8">
                    <h4 class="font-semibold text-gray-700 mb-1">üí∞ CAC vs LTV Benchmark by Sector</h4>
                    <p class="text-xs text-gray-500 mb-3">How your sector compares to others on customer economics</p>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <canvas id="cacLtvChart" height="80"></canvas>
                    </div>
                </div>

                <!-- Market Entry Difficulty vs Opportunity -->
                <div class="mb-8">
                    <h4 class="font-semibold text-gray-700 mb-1">üéØ Sector Opportunity vs Entry Difficulty</h4>
                    <p class="text-xs text-gray-500 mb-3">Bubble chart ‚Äî size = market size, position = opportunity vs difficulty</p>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <canvas id="bubbleChart" height="90"></canvas>
                    </div>
                </div>

                <!-- Risk Assessment Gauge -->
                <div class="mb-8">
                    <h4 class="font-semibold text-gray-700 mb-1">‚ö†Ô∏è Risk Factor Breakdown</h4>
                    <p class="text-xs text-gray-500 mb-3">Key risk categories scored for your specific business</p>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <canvas id="riskChart" height="80"></canvas>
                    </div>
                </div>

                <!-- Growth Stage Timeline -->
                <div>
                    <h4 class="font-semibold text-gray-700 mb-1">üöÄ Customer Growth Curve</h4>
                    <p class="text-xs text-gray-500 mb-3">Projected customer acquisition over 3 years</p>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <canvas id="customerGrowthChart" height="80"></canvas>
                    </div>
                </div>
            </div>

            <!-- Payment Partnership Requirements (conditional) -->
            <div id="paymentPartnership" class="hidden bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-6">üí≥ Payment Aggregator Partnership Requirements</h3>
                
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                    <p class="text-sm text-blue-900">
                        <strong>Note:</strong> Your business concept involves payment processing. Here are the requirements for partnering with major payment aggregators.
                    </p>
                </div>

                <!-- Payment Aggregator Options -->
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-700 mb-4">Recommended Payment Partners</h4>
                    <div id="paymentProviders" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Will be populated by JS -->
                    </div>
                </div>

                <!-- Technical Requirements -->
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-700 mb-3">Technical Integration Requirements</h4>
                    <div id="technicalReqs" class="space-y-2">
                        <!-- Will be populated by JS -->
                    </div>
                </div>

                <!-- Compliance Requirements -->
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-700 mb-3">Compliance & Legal Requirements</h4>
                    <div id="complianceReqs" class="space-y-2">
                        <!-- Will be populated by JS -->
                    </div>
                </div>

                <!-- Financial Requirements -->
                <div>
                    <h4 class="font-semibold text-gray-700 mb-3">Financial & Business Requirements</h4>
                    <div id="financialReqs" class="space-y-2">
                        <!-- Will be populated by JS -->
                    </div>
                </div>
            </div>

            <!-- Resources & Tools Required -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-6">üõ†Ô∏è Resources & Tools Required</h3>
                
                <!-- Technology & Software -->
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-700 mb-3 flex items-center">
                        <span class="bg-blue-100 text-blue-800 rounded-full w-8 h-8 flex items-center justify-center mr-2 text-sm">1</span>
                        Technology & Software Tools
                    </h4>
                    <div id="technologyTools" class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <!-- Will be populated by JS -->
                    </div>
                </div>

                <!-- Physical Resources -->
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-700 mb-3 flex items-center">
                        <span class="bg-green-100 text-green-800 rounded-full w-8 h-8 flex items-center justify-center mr-2 text-sm">2</span>
                        Physical Resources & Equipment
                    </h4>
                    <div id="physicalResources" class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <!-- Will be populated by JS -->
                    </div>
                </div>

                <!-- Human Resources -->
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-700 mb-3 flex items-center">
                        <span class="bg-purple-100 text-purple-800 rounded-full w-8 h-8 flex items-center justify-center mr-2 text-sm">3</span>
                        Team & Skills Needed
                    </h4>
                    <div id="humanResources" class="space-y-2">
                        <!-- Will be populated by JS -->
                    </div>
                </div>

                <!-- Marketing & Distribution -->
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-700 mb-3 flex items-center">
                        <span class="bg-orange-100 text-orange-800 rounded-full w-8 h-8 flex items-center justify-center mr-2 text-sm">4</span>
                        Marketing & Distribution Channels
                    </h4>
                    <div id="marketingChannels" class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <!-- Will be populated by JS -->
                    </div>
                </div>

                <!-- Legal & Compliance -->
                <div>
                    <h4 class="font-semibold text-gray-700 mb-3 flex items-center">
                        <span class="bg-red-100 text-red-800 rounded-full w-8 h-8 flex items-center justify-center mr-2 text-sm">5</span>
                        Legal & Compliance Requirements
                    </h4>
                    <div id="legalRequirements" class="space-y-2">
                        <!-- Will be populated by JS -->
                    </div>
                </div>
            </div>

            <!-- Customer Metrics -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-6">üë• Customer Acquisition Metrics</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-orange-50 rounded-lg p-4">
                        <div class="text-sm text-orange-600 font-medium mb-1">Customer Acquisition Cost</div>
                        <div id="cac" class="text-2xl font-bold text-orange-900">--</div>
                        <div class="text-xs text-orange-700 mt-1">Average per customer</div>
                    </div>
                    <div class="bg-teal-50 rounded-lg p-4">
                        <div class="text-sm text-teal-600 font-medium mb-1">Lifetime Value</div>
                        <div id="ltv" class="text-2xl font-bold text-teal-900">--</div>
                        <div class="text-xs text-teal-700 mt-1">Per customer</div>
                    </div>
                    <div class="bg-pink-50 rounded-lg p-4">
                        <div class="text-sm text-pink-600 font-medium mb-1">LTV/CAC Ratio</div>
                        <div id="ltvCacRatio" class="text-2xl font-bold text-pink-900">--</div>
                        <div class="text-xs text-pink-700 mt-1">Target: >3.0</div>
                    </div>
                </div>

                <div class="border-t pt-4">
                    <h4 class="font-semibold text-gray-700 mb-3">Customer Growth Projections</h4>
                    <div class="space-y-2" id="customerGrowth">
                        <!-- Will be populated by JS -->
                    </div>
                </div>
            </div>

            <!-- Success & Failure Examples -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">üìà Case Studies & Benchmarks</h3>
                <div id="examplesAnalysis" class="text-gray-700 prose max-w-none"></div>
            </div>

            <!-- Startup Roadmap -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">üéØ 2026 Launch Roadmap</h3>
                <div id="startupGuide" class="text-gray-700 prose max-w-none"></div>
            </div>

            <!-- Risk Analysis -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">‚ö†Ô∏è Risk Assessment</h3>
                <div id="riskFactors" class="text-gray-700 prose max-w-none"></div>
            </div>
        </div>

        <!-- Error Display -->
        <div id="error" class="hidden bg-red-50 border border-red-200 rounded-xl p-6">
            <h3 class="text-red-800 font-semibold mb-2">Analysis Error</h3>
            <p id="errorMessage" class="text-red-700"></p>
        </div>

        <!-- Footer -->
        <div class="mt-8 text-center text-sm text-gray-500">
            <p>Powered by free AI models ¬∑ Analysis is educational and should not replace professional business advice</p>
        </div>
    </div>

    <script>
        const analyzeBtn = document.getElementById('analyzeBtn');
        const loading = document.getElementById('loading');
        const results = document.getElementById('results');
        const error = document.getElementById('error');

        analyzeBtn.addEventListener('click', async () => {
            const businessIdea = document.getElementById('businessIdea').value.trim();
            const country = document.getElementById('country').value.trim();
            const industry = document.getElementById('industry').value.trim();

            if (!businessIdea || !country) {
                alert('Please enter both a business idea and target country.');
                return;
            }

            // Reset UI
            results.classList.add('hidden');
            error.classList.add('hidden');
            loading.classList.remove('hidden');
            analyzeBtn.disabled = true;

            try {
                const analysis = await analyzeBusinessViability(businessIdea, country, industry);
                displayResults(analysis);
            } catch (err) {
                showError(err.message || 'An error occurred during analysis. Please try again.');
            } finally {
                loading.classList.add('hidden');
                analyzeBtn.disabled = false;
            }
        });

        async function analyzeBusinessViability(idea, country, industry) {
            const industryText = industry ? ` in the ${industry} industry` : '';
            
            const prompt = `Analyze this business idea comprehensively: "${idea}" for ${country}${industryText}.

Provide a detailed analysis with:

1. SUCCESS SCORE (0-100): Calculate based on market conditions, competition, barriers to entry, and historical success rates. Start your response with "SCORE: [number]"

2. SCORE REASONING: One sentence explaining the score

3. MARKET ANALYSIS: Current market size, growth trends, demand, saturation for ${country} in 2026

4. REVENUE POTENTIAL: Realistic monthly/annual revenue estimates, startup costs, profitability timeline

5. COMPETITION: Major competitors and competitive landscape

6. SUCCESS & FAILURE EXAMPLES: Real examples with specific reasons and data

7. STARTUP GUIDE 2026: Practical steps considering current regulations and technology

8. KEY RISKS: Main failure factors

Format exactly as:
SCORE: [number]
SCORE_REASONING: [text]

MARKET_ANALYSIS:
[analysis]

REVENUE_POTENTIAL:
[analysis]

COMPETITION:
[analysis]

EXAMPLES:
[analysis]

STARTUP_GUIDE:
[analysis]

RISKS:
[analysis]`;

            try {
                // Use Hugging Face's free Inference API with Qwen model (good for analysis)
                const response = await fetch(
                    "https://api-inference.huggingface.co/models/Qwen/Qwen2.5-72B-Instruct",
                    {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                            inputs: prompt,
                            parameters: {
                                max_new_tokens: 2000,
                                temperature: 0.7,
                                top_p: 0.9,
                                return_full_text: false
                            }
                        })
                    }
                );

                if (!response.ok) {
                    // If rate limited or error, try backup model
                    if (response.status === 503 || response.status === 429) {
                        return await fallbackAnalysis(idea, country, industry);
                    }
                    throw new Error(`API error: ${response.status}`);
                }

                const data = await response.json();
                let text = '';
                
                if (Array.isArray(data) && data[0]?.generated_text) {
                    text = data[0].generated_text;
                } else if (data.generated_text) {
                    text = data.generated_text;
                } else {
                    throw new Error('Unexpected API response format');
                }

                return parseAnalysis(text);
            } catch (err) {
                console.error('Primary API failed:', err);
                // Fallback to template-based analysis
                return await fallbackAnalysis(idea, country, industry);
            }
        }

        async function fallbackAnalysis(idea, country, industry) {
            // Generate realistic metrics based on business type and location
            const industryText = industry || 'general';
            const ideaLower = idea.toLowerCase();
            
            // Determine business type for more accurate estimates
            const isRetail = ideaLower.includes('shop') || ideaLower.includes('store') || ideaLower.includes('retail');
            const isFood = ideaLower.includes('food') || ideaLower.includes('coffee') || ideaLower.includes('restaurant');
            const isTech = ideaLower.includes('tech') || ideaLower.includes('software') || ideaLower.includes('app') || ideaLower.includes('ai');
            const isService = ideaLower.includes('service') || ideaLower.includes('consulting') || ideaLower.includes('coaching');
            
            // Market size multipliers based on country
            const countryMultipliers = {
                'united states': 1.0, 'us': 1.0, 'usa': 1.0,
                'china': 0.9, 'india': 0.6, 'germany': 0.7,
                'uk': 0.7, 'united kingdom': 0.7, 'france': 0.7,
                'japan': 0.8, 'brazil': 0.5, 'canada': 0.8
            };
            
            const countryKey = country.toLowerCase();
            const countryMultiplier = Object.keys(countryMultipliers).find(key => countryKey.includes(key)) 
                ? countryMultipliers[Object.keys(countryMultipliers).find(key => countryKey.includes(key))]
                : 0.5;

            // Base market size (in billions) - SECTOR SPECIFIC with real variations
            let baseMarketSize = 10;
            let growthRateLow = 6;
            let growthRateHigh = 10;
            
            // Payment/Fintech - large, fast-growing market
            const isPayment = ideaLower.includes('payment') || ideaLower.includes('gateway') || 
                             ideaLower.includes('fintech') || ideaLower.includes('wallet');
            
            // Energy/Gas - massive market, moderate growth
            const isEnergy = ideaLower.includes('gas') || ideaLower.includes('energy') || 
                            ideaLower.includes('oil') || ideaLower.includes('fuel');
            
            // Healthcare - large, steady growth
            const isHealthcare = ideaLower.includes('health') || ideaLower.includes('medical') || 
                                ideaLower.includes('clinic') || ideaLower.includes('hospital');
            
            // Logistics - medium-large, high growth
            const isLogistics = ideaLower.includes('logistics') || ideaLower.includes('delivery') || 
                               ideaLower.includes('courier');
            
            // Real Estate - massive market, slow growth
            const isRealEstate = ideaLower.includes('real estate') || ideaLower.includes('property');
            
            if (isPayment) {
                baseMarketSize = countryKey.includes('india') ? 200 : 
                                countryKey.includes('china') ? 500 :
                                countryKey.includes('us') ? 300 : 150;
                growthRateLow = 15;
                growthRateHigh = 22;
            } else if (isEnergy) {
                baseMarketSize = countryKey.includes('us') ? 1500 :
                                countryKey.includes('india') ? 400 :
                                countryKey.includes('saudi') || countryKey.includes('middle east') ? 800 :
                                countryKey.includes('uk') || countryKey.includes('europe') ? 600 : 300;
                growthRateLow = 3;
                growthRateHigh = 6;
            } else if (isHealthcare) {
                baseMarketSize = countryKey.includes('us') ? 4000 :
                                countryKey.includes('india') ? 280 :
                                countryKey.includes('china') ? 1200 :
                                countryKey.includes('europe') || countryKey.includes('uk') ? 900 : 200;
                growthRateLow = 7;
                growthRateHigh = 12;
            } else if (isLogistics) {
                baseMarketSize = countryKey.includes('us') ? 1600 :
                                countryKey.includes('india') ? 300 :
                                countryKey.includes('china') ? 1400 :
                                countryKey.includes('europe') ? 800 : 150;
                growthRateLow = 8;
                growthRateHigh = 14;
            } else if (isRealEstate) {
                baseMarketSize = countryKey.includes('us') ? 3500 :
                                countryKey.includes('india') ? 200 :
                                countryKey.includes('china') ? 2800 :
                                countryKey.includes('uk') || countryKey.includes('europe') ? 1200 : 180;
                growthRateLow = 2;
                growthRateHigh = 5;
            } else if (isFood) {
                baseMarketSize = countryKey.includes('us') ? 800 :
                                countryKey.includes('india') ? 250 :
                                countryKey.includes('china') ? 900 :
                                50 * countryMultiplier;
                growthRateLow = 5;
                growthRateHigh = 8;
            } else if (isTech) {
                baseMarketSize = countryKey.includes('us') ? 500 :
                                countryKey.includes('india') ? 180 :
                                countryKey.includes('china') ? 400 :
                                100 * countryMultiplier;
                growthRateLow = 12;
                growthRateHigh = 18;
            } else if (isRetail) {
                baseMarketSize = countryKey.includes('us') ? 600 :
                                countryKey.includes('india') ? 1200 :
                                countryKey.includes('china') ? 3500 :
                                30 * countryMultiplier;
                growthRateLow = 4;
                growthRateHigh = 7;
            } else if (isService) {
                baseMarketSize = 20 * countryMultiplier;
                growthRateLow = 8;
                growthRateHigh = 12;
            }
            
            const marketSize = baseMarketSize.toFixed(1);
            
            // Growth rates
            const growthRate = `${growthRateLow}-${growthRateHigh}%`;

            // Startup costs based on business type AND country - REAL variations
            let startupCosts, totalStartupCost;
            
            if (isPayment) {
                // Payment/Fintech - high regulatory and tech costs
                startupCosts = [
                    { category: 'Technology Development', amount: countryKey.includes('india') ? '‚Çπ40L - ‚Çπ80L' : '$50,000 - $120,000' },
                    { category: 'Compliance & Licensing', amount: countryKey.includes('india') ? '‚Çπ25L - ‚Çπ50L' : '$30,000 - $80,000' },
                    { category: 'Security Infrastructure', amount: countryKey.includes('india') ? '‚Çπ15L - ‚Çπ30L' : '$20,000 - $40,000' },
                    { category: 'Legal & Regulatory', amount: countryKey.includes('india') ? '‚Çπ10L - ‚Çπ20L' : '$15,000 - $30,000' },
                    { category: 'Marketing & User Acquisition', amount: countryKey.includes('india') ? '‚Çπ20L - ‚Çπ40L' : '$25,000 - $50,000' },
                    { category: 'Working Capital Reserve', amount: countryKey.includes('india') ? '‚Çπ30L - ‚Çπ50L' : '$40,000 - $70,000' }
                ];
                totalStartupCost = countryKey.includes('india') ? '‚Çπ1.4Cr - ‚Çπ2.7Cr' :
                                  countryKey.includes('us') ? '$180,000 - $390,000' :
                                  '$150,000 - $320,000';
            } else if (isEnergy) {
                // Energy/Gas - massive infrastructure costs
                startupCosts = [
                    { category: 'Infrastructure & Equipment', amount: countryKey.includes('india') ? '‚Çπ2Cr - ‚Çπ5Cr' : '$250,000 - $600,000' },
                    { category: 'Licensing & Permits', amount: countryKey.includes('india') ? '‚Çπ50L - ‚Çπ1Cr' : '$60,000 - $150,000' },
                    { category: 'Storage Facilities', amount: countryKey.includes('india') ? '‚Çπ80L - ‚Çπ1.5Cr' : '$100,000 - $200,000' },
                    { category: 'Distribution Network', amount: countryKey.includes('india') ? '‚Çπ1Cr - ‚Çπ2Cr' : '$120,000 - $250,000' },
                    { category: 'Safety & Compliance', amount: countryKey.includes('india') ? '‚Çπ30L - ‚Çπ60L' : '$40,000 - $80,000' },
                    { category: 'Initial Inventory', amount: countryKey.includes('india') ? '‚Çπ1Cr - ‚Çπ2Cr' : '$150,000 - $300,000' }
                ];
                totalStartupCost = countryKey.includes('india') ? '‚Çπ5Cr - ‚Çπ11.5Cr' :
                                  countryKey.includes('us') ? '$720,000 - $1.58M' :
                                  '$600,000 - $1.3M';
            } else if (isHealthcare) {
                // Healthcare - high equipment and licensing costs
                startupCosts = [
                    { category: 'Medical Equipment', amount: countryKey.includes('india') ? '‚Çπ1Cr - ‚Çπ2.5Cr' : '$150,000 - $350,000' },
                    { category: 'Facility Lease & Setup', amount: countryKey.includes('india') ? '‚Çπ40L - ‚Çπ80L' : '$60,000 - $120,000' },
                    { category: 'Licenses & Certifications', amount: countryKey.includes('india') ? '‚Çπ15L - ‚Çπ30L' : '$25,000 - $50,000' },
                    { category: 'Staff Salaries (3 months)', amount: countryKey.includes('india') ? '‚Çπ25L - ‚Çπ50L' : '$40,000 - $80,000' },
                    { category: 'Medical Supplies & Inventory', amount: countryKey.includes('india') ? '‚Çπ20L - ‚Çπ40L' : '$30,000 - $60,000' },
                    { category: 'Insurance & Legal', amount: countryKey.includes('india') ? '‚Çπ10L - ‚Çπ25L' : '$20,000 - $40,000' }
                ];
                totalStartupCost = countryKey.includes('india') ? '‚Çπ2.1Cr - ‚Çπ5.3Cr' :
                                  countryKey.includes('us') ? '$325,000 - $700,000' :
                                  '$250,000 - $580,000';
            } else if (isLogistics) {
                // Logistics - vehicle and warehouse costs
                startupCosts = [
                    { category: 'Vehicles & Fleet', amount: countryKey.includes('india') ? '‚Çπ60L - ‚Çπ1.2Cr' : '$80,000 - $180,000' },
                    { category: 'Warehouse Space', amount: countryKey.includes('india') ? '‚Çπ30L - ‚Çπ60L' : '$40,000 - $90,000' },
                    { category: 'Technology & Tracking Systems', amount: countryKey.includes('india') ? '‚Çπ15L - ‚Çπ35L' : '$20,000 - $50,000' },
                    { category: 'Licenses & Insurance', amount: countryKey.includes('india') ? '‚Çπ10L - ‚Çπ20L' : '$15,000 - $30,000' },
                    { category: 'Staff & Operations', amount: countryKey.includes('india') ? '‚Çπ20L - ‚Çπ40L' : '$30,000 - $60,000' },
                    { category: 'Working Capital', amount: countryKey.includes('india') ? '‚Çπ25L - ‚Çπ50L' : '$35,000 - $70,000' }
                ];
                totalStartupCost = countryKey.includes('india') ? '‚Çπ1.6Cr - ‚Çπ3.3Cr' :
                                  countryKey.includes('us') ? '$220,000 - $480,000' :
                                  '$180,000 - $400,000';
            } else if (isRealEstate) {
                // Real Estate - office and marketing costs
                startupCosts = [
                    { category: 'Office Setup & Leasing', amount: countryKey.includes('india') ? '‚Çπ20L - ‚Çπ40L' : '$30,000 - $60,000' },
                    { category: 'Licensing & Registration', amount: countryKey.includes('india') ? '‚Çπ5L - ‚Çπ15L' : '$10,000 - $25,000' },
                    { category: 'Marketing & Branding', amount: countryKey.includes('india') ? '‚Çπ15L - ‚Çπ35L' : '$25,000 - $50,000' },
                    { category: 'Technology Platform', amount: countryKey.includes('india') ? '‚Çπ10L - ‚Çπ25L' : '$15,000 - $35,000' },
                    { category: 'Staff & Operations', amount: countryKey.includes('india') ? '‚Çπ15L - ‚Çπ30L' : '$25,000 - $45,000' },
                    { category: 'Working Capital', amount: countryKey.includes('india') ? '‚Çπ10L - ‚Çπ25L' : '$15,000 - $35,000' }
                ];
                totalStartupCost = countryKey.includes('india') ? '‚Çπ75L - ‚Çπ1.7Cr' :
                                  countryKey.includes('us') ? '$120,000 - $250,000' :
                                  '$95,000 - $210,000';
            } else if (isFood || isRetail) {
                startupCosts = [
                    { category: 'Location & Lease', amount: '$15,000 - $30,000' },
                    { category: 'Equipment & Inventory', amount: '$20,000 - $40,000' },
                    { category: 'Licenses & Permits', amount: '$2,000 - $5,000' },
                    { category: 'Marketing & Branding', amount: '$5,000 - $10,000' },
                    { category: 'Initial Staffing', amount: '$10,000 - $15,000' },
                    { category: 'Working Capital', amount: '$10,000 - $20,000' }
                ];
                totalStartupCost = '$62,000 - $120,000';
            } else if (isTech) {
                startupCosts = [
                    { category: 'Development Costs', amount: '$30,000 - $60,000' },
                    { category: 'Infrastructure & Tools', amount: '$5,000 - $15,000' },
                    { category: 'Legal & IP Protection', amount: '$5,000 - $10,000' },
                    { category: 'Marketing & User Acquisition', amount: '$15,000 - $30,000' },
                    { category: 'Team/Contractors', amount: '$20,000 - $40,000' },
                    { category: 'Operating Reserves', amount: '$10,000 - $20,000' }
                ];
                totalStartupCost = '$85,000 - $175,000';
            } else {
                startupCosts = [
                    { category: 'Office/Workspace Setup', amount: '$5,000 - $15,000' },
                    { category: 'Equipment & Technology', amount: '$8,000 - $15,000' },
                    { category: 'Licenses & Insurance', amount: '$3,000 - $6,000' },
                    { category: 'Marketing & Website', amount: '$5,000 - $12,000' },
                    { category: 'Initial Operations', amount: '$7,000 - $12,000' },
                    { category: 'Working Capital', amount: '$7,000 - $15,000' }
                ];
                totalStartupCost = '$35,000 - $75,000';
            }

            // Revenue projections - SECTOR SPECIFIC with real variations
            let revenueMultiplier = 1.0;
            let profitMarginYear3 = 38;
            
            if (isPayment) {
                revenueMultiplier = countryKey.includes('india') ? 1.8 : 2.2;
                profitMarginYear3 = 45; // High margin business
            } else if (isEnergy) {
                revenueMultiplier = countryKey.includes('india') ? 3.5 : 5.0; // High volume
                profitMarginYear3 = 15; // Low margin, high volume
            } else if (isHealthcare) {
                revenueMultiplier = countryKey.includes('india') ? 2.0 : 3.5;
                profitMarginYear3 = 25; // Moderate margins
            } else if (isLogistics) {
                revenueMultiplier = countryKey.includes('india') ? 1.5 : 2.0;
                profitMarginYear3 = 12; // Thin margins
            } else if (isRealEstate) {
                revenueMultiplier = countryKey.includes('india') ? 2.5 : 4.0;
                profitMarginYear3 = 35; // Commission-based, high margin
            } else if (isTech) {
                revenueMultiplier = 1.5;
                profitMarginYear3 = 42; // SaaS high margins
            } else if (isFood) {
                revenueMultiplier = 0.8;
                profitMarginYear3 = 18; // Low margins
            } else if (isRetail) {
                revenueMultiplier = 1.0;
                profitMarginYear3 = 28;
            } else if (isService) {
                revenueMultiplier = 1.2;
                profitMarginYear3 = 32;
            }
            
            const revenueProjections = [
                {
                    period: 'Month 1-3',
                    revenue: '$' + Math.round(2000 * revenueMultiplier).toLocaleString(),
                    expenses: '$' + Math.round(8000 * revenueMultiplier).toLocaleString(),
                    netProfit: '-$' + Math.round(6000 * revenueMultiplier).toLocaleString(),
                    margin: '-300%'
                },
                {
                    period: 'Month 4-6',
                    revenue: '$' + Math.round(6000 * revenueMultiplier).toLocaleString(),
                    expenses: '$' + Math.round(7000 * revenueMultiplier).toLocaleString(),
                    netProfit: '-$' + Math.round(1000 * revenueMultiplier).toLocaleString(),
                    margin: '-17%'
                },
                {
                    period: 'Month 7-12',
                    revenue: '$' + Math.round(12000 * revenueMultiplier).toLocaleString(),
                    expenses: '$' + Math.round(9000 * revenueMultiplier).toLocaleString(),
                    netProfit: '$' + Math.round(3000 * revenueMultiplier).toLocaleString(),
                    margin: '25%'
                },
                {
                    period: 'Year 2 (avg)',
                    revenue: '$' + Math.round(25000 * revenueMultiplier).toLocaleString(),
                    expenses: '$' + Math.round(17000 * revenueMultiplier).toLocaleString(),
                    netProfit: '$' + Math.round(8000 * revenueMultiplier).toLocaleString(),
                    margin: '32%'
                },
                {
                    period: 'Year 3 (avg)',
                    revenue: '$' + Math.round(45000 * revenueMultiplier).toLocaleString(),
                    expenses: '$' + Math.round(28000 * revenueMultiplier).toLocaleString(),
                    netProfit: '$' + Math.round(17000 * revenueMultiplier).toLocaleString(),
                    margin: '38%'
                }
            ];

            // Customer acquisition metrics - SECTOR SPECIFIC
            let cac, ltv, ltvCacRatio;
            
            if (isPayment) {
                cac = countryKey.includes('india') ? '‚Çπ350' : '$45';
                ltv = countryKey.includes('india') ? '‚Çπ8,500' : '$950';
                ltvCacRatio = '19.3';
            } else if (isEnergy) {
                cac = countryKey.includes('india') ? '‚Çπ280' : '$35';
                ltv = countryKey.includes('india') ? '‚Çπ45,000' : '$5,200';
                ltvCacRatio = '148.6'; // Very high LTV for utilities
            } else if (isHealthcare) {
                cac = countryKey.includes('india') ? '‚Çπ450' : '$60';
                ltv = countryKey.includes('india') ? '‚Çπ12,000' : '$1,800';
                ltvCacRatio = '26.7';
            } else if (isLogistics) {
                cac = countryKey.includes('india') ? '‚Çπ180' : '$22';
                ltv = countryKey.includes('india') ? '‚Çπ2,500' : '$320';
                ltvCacRatio = '13.9';
            } else if (isRealEstate) {
                cac = countryKey.includes('india') ? '‚Çπ800' : '$95';
                ltv = countryKey.includes('india') ? '‚Çπ85,000' : '$10,500';
                ltvCacRatio = '106.3'; // Commission per transaction
            } else if (isTech) {
                cac = '$45';
                ltv = '$450';
                ltvCacRatio = '10.0';
            } else if (isFood) {
                cac = '$15';
                ltv = '$180';
                ltvCacRatio = '12.0';
            } else if (isRetail) {
                cac = '$25';
                ltv = '$300';
                ltvCacRatio = '12.0';
            } else if (isService) {
                cac = '$120';
                ltv = '$1,200';
                ltvCacRatio = '10.0';
            } else {
                cac = '$35';
                ltv = '$350';
                ltvCacRatio = '10.0';
            }

            // Customer growth projections
            const customerGrowth = [
                { period: 'Month 3', customers: '50', percentage: 10 },
                { period: 'Month 6', customers: '150', percentage: 30 },
                { period: 'Month 12', customers: '400', percentage: 60 },
                { period: 'Year 2', customers: '1,000', percentage: 85 },
                { period: 'Year 3', customers: '2,500', percentage: 100 }
            ];

            // Competition metrics
            const competitorCount = isFood ? '15-25' : isTech ? '8-15' : isRetail ? '12-20' : isService ? '10-18' : '10-20';
            const marketSaturation = isFood ? 'High' : isTech ? 'Medium' : isRetail ? 'High' : isService ? 'Medium' : 'Medium';
            const entryBarrier = isTech ? 'Medium' : isFood ? 'Low' : isRetail ? 'Medium' : isService ? 'Low' : 'Medium';
            const competitiveAdvantage = isTech ? 'High' : isService ? 'High' : 'Medium';

            // Generate competitor profiles
            const competitors = generateCompetitors(idea, country, isFood, isTech, isRetail, isService);
            
            // Generate differentiation strategies
            const differentiation = generateDifferentiation(idea, isFood, isTech, isRetail, isService);
            
            // Generate resources needed
            const resources = generateResources(idea, country, isFood, isTech, isRetail, isService);

            // Check if this is a payment-related business
            const isPaymentBusiness = ideaLower.includes('payment') || ideaLower.includes('gateway') || 
                                      ideaLower.includes('fintech') || ideaLower.includes('wallet') ||
                                      ideaLower.includes('pos') || ideaLower.includes('merchant');
            
            // Generate payment partnership data if applicable
            const paymentPartnership = isPaymentBusiness ? generatePaymentPartnership(country) : null;

            // Generate market growth data for visualization
            const marketGrowthData = generateMarketGrowthData(marketSize, growthRate);

            return {
                score: calculateEstimatedScore(idea, country, industry),
                scoreReasoning: "Based on market analysis patterns, competitive landscape, and business model assessment",
                
                businessIdea: idea,
                country: country,
                isFood, isTech, isRetail, isService,
                isPayment, isEnergy, isHealthcare, isLogistics, isRealEstate,
                isPaymentBusiness: isPaymentBusiness,
                paymentPartnership: paymentPartnership,
                
                competitors: competitors,
                differentiation: differentiation,
                resources: resources,
                
                metrics: {
                    marketSize: '$' + marketSize + 'B',
                    growthRate: growthRate,
                    targetShare: '0.1-0.5%',
                    marketGrowthData: marketGrowthData,
                    startupCosts: startupCosts,
                    totalStartup: totalStartupCost,
                    revenueProjections: revenueProjections,
                    breakEven: '12-18 months',
                    year3Revenue: '$' + Math.round(540000 * revenueMultiplier).toLocaleString(),
                    roi: Math.round(200 + (revenueMultiplier * 50)) + '%',
                    competitorCount: competitorCount,
                    marketSaturation: marketSaturation,
                    entryBarrier: entryBarrier,
                    competitiveAdvantage: competitiveAdvantage,
                    cac: cac,
                    ltv: ltv,
                    ltvCacRatio: ltvCacRatio,
                    customerGrowth: customerGrowth
                },
                
                marketAnalysis: `The ${industryText} market in ${country} is valued at approximately $${marketSize} billion with a projected annual growth rate of ${growthRate}. This represents a significant opportunity for new entrants who can differentiate themselves effectively.

Key market trends for 2026 include increased digital adoption, sustainability focus, and changing consumer preferences toward personalized experiences. The target addressable market for "${idea}" could realistically capture 0.1-0.5% market share within 3-5 years with proper execution.

Market demand indicators show ${marketSaturation.toLowerCase()} saturation levels, meaning there is ${marketSaturation === 'High' ? 'intense competition but also proven demand' : 'room for innovation and market expansion'}. Success will depend heavily on unique value proposition, operational excellence, and effective customer acquisition strategies.`,

                revenueAnalysis: `Based on analysis of similar businesses, revenue trajectories typically follow a J-curve pattern with initial losses followed by accelerating growth. The financial projections above reflect realistic expectations for this business model.

Initial capital requirements range from ${totalStartupCost.split(' - ')[0]} to ${totalStartupCost.split(' - ')[1]}, with the higher end recommended for more aggressive market entry. Monthly operating expenses in the first year average around $${Math.round(9000 * revenueMultiplier).toLocaleString()}, decreasing as a percentage of revenue over time.

Customer acquisition costs (CAC) are estimated at ${cac} per customer, with a lifetime value (LTV) of ${ltv}, yielding a healthy LTV:CAC ratio of ${ltvCacRatio}:1. This indicates strong unit economics once customer acquisition channels are optimized.

Profitability typically emerges around month 12-18 as customer base scales and operational efficiencies improve. By year 3, successful businesses in this category achieve 35-40% profit margins.`,

                competitionAnalysis: `The competitive landscape features ${competitorCount} major players in ${country}, indicating a ${marketSaturation.toLowerCase()}-saturation market. Entry barriers are considered ${entryBarrier.toLowerCase()}, primarily consisting of:

${isTech ? '‚Ä¢ Technology development and intellectual property\n‚Ä¢ User acquisition and network effects\n‚Ä¢ Capital requirements for scaling' : 
  isFood || isRetail ? '‚Ä¢ Location and real estate costs\n‚Ä¢ Supplier relationships and inventory management\n‚Ä¢ Brand establishment and customer loyalty' :
  '‚Ä¢ Expertise and reputation building\n‚Ä¢ Client acquisition and retention\n‚Ä¢ Regulatory compliance and certifications'}

Competitive advantages can be achieved through innovation potential rated as ${competitiveAdvantage.toLowerCase()}, focusing on differentiation through superior customer experience, operational efficiency, or unique market positioning.

Market leaders typically command 15-30% market share, while mid-tier players hold 3-8%. There is significant opportunity for niche positioning and local market dominance with the right strategy.`,

                examplesAnalysis: `**Successful Case Studies:**

Similar businesses that achieved success typically shared these characteristics:
‚Ä¢ Strong product-market fit validated through early customer feedback
‚Ä¢ Lean initial operations with focus on core value proposition  
‚Ä¢ Effective use of digital marketing and social proof
‚Ä¢ Year 1 revenue: $${Math.round(144000 * revenueMultiplier * 0.8).toLocaleString()} to $${Math.round(144000 * revenueMultiplier * 1.2).toLocaleString()}
‚Ä¢ Year 3 revenue: $${Math.round(540000 * revenueMultiplier * 0.8).toLocaleString()} to $${Math.round(540000 * revenueMultiplier * 1.5).toLocaleString()}
‚Ä¢ Exit multiples: 2.5x-4x annual revenue for acquisitions

**Common Failure Patterns:**

Businesses that failed often experienced:
‚Ä¢ Insufficient market research leading to poor product-market fit (40% of failures)
‚Ä¢ Inadequate capital reserves - running out of cash before achieving profitability (30%)
‚Ä¢ Pricing too low, unable to achieve sustainable margins (15%)
‚Ä¢ Poor location choice or weak online presence (10%)
‚Ä¢ Partnership conflicts and team issues (5%)

The key differentiator between success and failure is typically execution quality, customer obsession, and financial discipline rather than the core business idea itself.`,

                startupGuide: `**Phase 1: Foundation (Months 1-3)**
‚Ä¢ Validate business model through customer interviews and small-scale testing
‚Ä¢ Secure initial funding of ${totalStartupCost.split(' - ')[0]}-${totalStartupCost.split(' - ')[1]}
‚Ä¢ Register business entity and obtain necessary licenses/permits in ${country}
‚Ä¢ Develop MVP (Minimum Viable Product) or core service offering
‚Ä¢ Build basic digital presence (website, social media)

**Phase 2: Launch (Months 4-6)**  
‚Ä¢ Soft launch to initial customer segment
‚Ä¢ Implement core operations and establish supply chain/service delivery
‚Ä¢ Begin systematic customer acquisition through targeted channels
‚Ä¢ Collect feedback and iterate on product/service
‚Ä¢ Establish basic financial systems and KPI tracking

**Phase 3: Growth (Months 7-12)**
‚Ä¢ Scale customer acquisition based on proven channels
‚Ä¢ Optimize operations for efficiency and quality
‚Ä¢ Build team as needed (first 2-5 employees)
‚Ä¢ Expand product/service offerings based on demand
‚Ä¢ Achieve initial profitability targets

**Phase 4: Optimization (Year 2)**
‚Ä¢ Refine business model and pricing strategy
‚Ä¢ Invest in brand building and market positioning  
‚Ä¢ Explore additional revenue streams
‚Ä¢ Build strategic partnerships
‚Ä¢ Target $${Math.round(300000 * revenueMultiplier).toLocaleString()} annual revenue

**2026-Specific Considerations:**
‚Ä¢ Leverage AI tools for operational efficiency and customer service
‚Ä¢ Prioritize sustainable and ethical business practices (growing consumer demand)
‚Ä¢ Build strong online presence - 70%+ of customer research happens digitally
‚Ä¢ Consider remote/hybrid models to reduce overhead costs
‚Ä¢ Stay compliant with evolving data privacy and industry regulations in ${country}`,

                riskFactors: `**Critical Risk Assessment:**

**Financial Risks (High Priority)**
‚Ä¢ Cash flow gaps in months 1-12 before reaching profitability
‚Ä¢ Higher-than-expected customer acquisition costs
‚Ä¢ Price pressure from established competitors
‚Ä¢ Unexpected regulatory or compliance costs
Mitigation: Maintain 6-12 months operating reserves; start lean; validate unit economics early

**Market Risks (Medium Priority)**  
‚Ä¢ Market saturation: ${marketSaturation} level means competition for customers
‚Ä¢ Economic downturn affecting consumer spending in ${country}
‚Ä¢ Changing consumer preferences or market trends
‚Ä¢ Technology disruption in the industry
Mitigation: Diversify customer segments; maintain pricing flexibility; stay close to market trends

**Operational Risks (Medium Priority)**
‚Ä¢ Difficulty finding and retaining quality talent
‚Ä¢ Supply chain disruptions or vendor dependencies  
‚Ä¢ Scaling challenges as business grows
‚Ä¢ Technology or infrastructure failures
Mitigation: Build relationships with multiple suppliers; invest in systems early; hire carefully

**Strategic Risks (Variable)**
‚Ä¢ Failure to differentiate from competitors
‚Ä¢ Slow adaptation to market feedback
‚Ä¢ Partnership or co-founder conflicts
‚Ä¢ Regulatory changes impacting business model
Mitigation: Continuous innovation; maintain flexibility; clear agreements; legal counsel

**Overall Risk Profile:** ${marketSaturation === 'High' ? 'Moderate-High' : 'Moderate'} - Success requires strong execution, sufficient capital, and ability to differentiate in a competitive market. First-time entrepreneurs should consider gaining industry experience or partnering with experienced operators.`
            };
        }

        function calculateEstimatedScore(idea, country, industry) {
            // Simple heuristic scoring
            let score = 50; // Base score
            
            const ideaLower = idea.toLowerCase();
            
            // Boost for trending concepts
            if (ideaLower.includes('ai') || ideaLower.includes('sustainable') || 
                ideaLower.includes('eco') || ideaLower.includes('online')) score += 10;
            
            // Boost for developed markets
            if (country.toLowerCase().includes('united states') || 
                country.toLowerCase().includes('canada') ||
                country.toLowerCase().includes('germany') ||
                country.toLowerCase().includes('uk')) score += 5;
            
            // Moderate for emerging markets
            if (country.toLowerCase().includes('india') ||
                country.toLowerCase().includes('brazil')) score += 3;
            
            // Adjust for business type complexity
            if (ideaLower.includes('tech') || ideaLower.includes('software')) score += 5;
            if (ideaLower.includes('coffee') || ideaLower.includes('food')) score -= 5;
            
            // Keep within bounds
            return Math.max(30, Math.min(85, score));
        }

        function generateCompetitors(idea, country, isFood, isTech, isRetail, isService) {
            const competitors = [];
            const ideaLower = idea.toLowerCase();
            const countryLower = country.toLowerCase();
            
            // Check for payment-related business
            const isPayment = ideaLower.includes('payment') || ideaLower.includes('gateway') || 
                             ideaLower.includes('fintech') || ideaLower.includes('wallet');
            
            if (isPayment) {
                // Country-specific payment competitors - EXPANDED to 10-15 companies
                if (countryLower.includes('india')) {
                    competitors.push(
                        { name: 'Paytm', type: 'Direct', description: 'Leading digital wallet and payment platform in India', marketShare: '18-22%', strength: 'Strong' },
                        { name: 'PhonePe', type: 'Direct', description: 'UPI-based payment app owned by Flipkart/Walmart', marketShare: '17-20%', strength: 'Strong' },
                        { name: 'Google Pay (India)', type: 'Direct', description: 'Google\'s UPI-based payment solution', marketShare: '14-16%', strength: 'Strong' },
                        { name: 'Razorpay', type: 'Direct', description: 'Popular payment gateway for businesses in India', marketShare: '12-14%', strength: 'Strong' },
                        { name: 'PayU India', type: 'Direct', description: 'Payment gateway serving Indian merchants', marketShare: '6-8%', strength: 'Moderate' },
                        { name: 'CCAvenue', type: 'Direct', description: 'Established payment gateway for SMBs', marketShare: '5-7%', strength: 'Moderate' },
                        { name: 'Cashfree', type: 'Direct', description: 'Payment and banking APIs platform', marketShare: '4-5%', strength: 'Moderate' },
                        { name: 'Instamojo', type: 'Direct', description: 'Payment gateway for small businesses', marketShare: '3-4%', strength: 'Weak' },
                        { name: 'BillDesk', type: 'Direct', description: 'Online payment gateway and aggregator', marketShare: '3-4%', strength: 'Moderate' },
                        { name: 'Mobikwik', type: 'Direct', description: 'Digital wallet and payment platform', marketShare: '2-3%', strength: 'Weak' },
                        { name: 'Pine Labs', type: 'Direct', description: 'Merchant platform and payment solutions', marketShare: '2-3%', strength: 'Moderate' },
                        { name: 'Stripe India', type: 'Direct', description: 'International payment processor expanding in India', marketShare: '2-3%', strength: 'Moderate' },
                        { name: 'Amazon Pay', type: 'Indirect', description: 'Amazon\'s digital wallet service', marketShare: '2-3%', strength: 'Weak' },
                        { name: 'PayPal India', type: 'Direct', description: 'Global payment platform with India operations', marketShare: '1-2%', strength: 'Weak' }
                    );
                } else if (countryLower.includes('china')) {
                    competitors.push(
                        { name: 'Alipay (Ant Group)', type: 'Direct', description: 'Dominant mobile payment platform in China with 1B+ users', marketShare: '48-52%', strength: 'Strong' },
                        { name: 'WeChat Pay (Tencent)', type: 'Direct', description: 'Integrated payment within WeChat ecosystem', marketShare: '35-38%', strength: 'Strong' },
                        { name: 'UnionPay', type: 'Direct', description: 'China\'s national card payment network', marketShare: '6-8%', strength: 'Moderate' },
                        { name: 'Digital Yuan (e-CNY)', type: 'Indirect', description: 'China\'s central bank digital currency pilot', marketShare: '2-3%', strength: 'Weak' },
                        { name: 'JD Pay (JD Finance)', type: 'Direct', description: 'Payment service from JD.com', marketShare: '1-2%', strength: 'Weak' },
                        { name: 'Meituan Pay', type: 'Direct', description: 'Payment platform from Meituan', marketShare: '1-2%', strength: 'Weak' },
                        { name: 'Baidu Wallet', type: 'Direct', description: 'Baidu\'s mobile payment service', marketShare: '0.5-1%', strength: 'Weak' },
                        { name: 'Ping An PayPal', type: 'Direct', description: 'Joint venture payment platform', marketShare: '0.5-1%', strength: 'Weak' },
                        { name: 'Apple Pay China', type: 'Indirect', description: 'Apple\'s payment service in China', marketShare: '0.3-0.5%', strength: 'Weak' },
                        { name: 'Samsung Pay China', type: 'Indirect', description: 'Samsung mobile payment', marketShare: '0.2-0.4%', strength: 'Weak' }
                    );
                } else if (countryLower.includes('brazil')) {
                    competitors.push(
                        { name: 'Pix (Central Bank)', type: 'Direct', description: 'Brazil\'s instant payment system, government-backed', marketShare: '35-38%', strength: 'Strong' },
                        { name: 'Mercado Pago', type: 'Direct', description: 'Payment solution from Mercado Libre', marketShare: '18-22%', strength: 'Strong' },
                        { name: 'PagSeguro (PagBank)', type: 'Direct', description: 'Digital bank and payment provider', marketShare: '12-15%', strength: 'Strong' },
                        { name: 'Cielo', type: 'Direct', description: 'Major card acquirer in Brazil', marketShare: '10-12%', strength: 'Moderate' },
                        { name: 'Rede', type: 'Direct', description: 'Card payment network', marketShare: '8-10%', strength: 'Moderate' },
                        { name: 'Stone (Ton)', type: 'Direct', description: 'Payment and banking solutions', marketShare: '6-8%', strength: 'Moderate' },
                        { name: 'GetNet (Santander)', type: 'Direct', description: 'Payment solutions from Santander', marketShare: '4-5%', strength: 'Moderate' },
                        { name: 'PayPal Brazil', type: 'Direct', description: 'International payment platform', marketShare: '2-3%', strength: 'Weak' },
                        { name: 'Nubank (NuPay)', type: 'Indirect', description: 'Digital bank with payment features', marketShare: '2-3%', strength: 'Moderate' },
                        { name: 'Stripe Brazil', type: 'Direct', description: 'Expanding international processor', marketShare: '1-2%', strength: 'Weak' },
                        { name: 'Adyen Brazil', type: 'Direct', description: 'Global payment platform', marketShare: '1-2%', strength: 'Weak' }
                    );
                } else if (countryLower.includes('uk') || countryLower.includes('united kingdom')) {
                    competitors.push(
                        { name: 'Stripe UK', type: 'Direct', description: 'Leading online payment processor', marketShare: '22-25%', strength: 'Strong' },
                        { name: 'Worldpay (FIS)', type: 'Direct', description: 'Major UK payment processor', marketShare: '18-20%', strength: 'Strong' },
                        { name: 'Adyen', type: 'Direct', description: 'Unified commerce platform', marketShare: '14-16%', strength: 'Strong' },
                        { name: 'PayPal UK', type: 'Direct', description: 'Established digital payment platform', marketShare: '12-14%', strength: 'Strong' },
                        { name: 'SumUp', type: 'Direct', description: 'Mobile POS for small businesses', marketShare: '6-8%', strength: 'Moderate' },
                        { name: 'Square (Block) UK', type: 'Direct', description: 'POS and payment solutions', marketShare: '5-7%', strength: 'Moderate' },
                        { name: 'Zettle by PayPal', type: 'Direct', description: 'Mobile card reader solution', marketShare: '4-5%', strength: 'Moderate' },
                        { name: 'Barclaycard', type: 'Direct', description: 'Card payment processing', marketShare: '4-5%', strength: 'Moderate' },
                        { name: 'Checkout.com', type: 'Direct', description: 'Cloud-based payment platform', marketShare: '3-4%', strength: 'Moderate' },
                        { name: 'Revolut Business', type: 'Indirect', description: 'Neobank offering payment services', marketShare: '3-4%', strength: 'Moderate' },
                        { name: 'GoCardless', type: 'Direct', description: 'Direct debit and recurring payments', marketShare: '2-3%', strength: 'Weak' },
                        { name: 'Klarna', type: 'Indirect', description: 'Buy now pay later with payment processing', marketShare: '2-3%', strength: 'Moderate' }
                    );
                } else if (countryLower.includes('germany') || countryLower.includes('eu') || 
                          countryLower.includes('europe') || countryLower.includes('france')) {
                    competitors.push(
                        { name: 'Adyen', type: 'Direct', description: 'Netherlands-based global payment platform', marketShare: '24-27%', strength: 'Strong' },
                        { name: 'Stripe Europe', type: 'Direct', description: 'Developer-friendly with strong EU support', marketShare: '18-21%', strength: 'Strong' },
                        { name: 'Worldline', type: 'Direct', description: 'European leader in payment services', marketShare: '14-16%', strength: 'Strong' },
                        { name: 'Klarna', type: 'Direct', description: 'Swedish buy-now-pay-later and payment provider', marketShare: '10-12%', strength: 'Strong' },
                        { name: 'Mollie', type: 'Direct', description: 'Popular European payment service provider', marketShare: '6-8%', strength: 'Moderate' },
                        { name: 'PayPal Europe', type: 'Direct', description: 'Established payment platform', marketShare: '6-8%', strength: 'Moderate' },
                        { name: 'Payconiq', type: 'Direct', description: 'Mobile payment solution (Benelux)', marketShare: '4-5%', strength: 'Moderate' },
                        { name: 'SumUp', type: 'Direct', description: 'Mobile POS across Europe', marketShare: '3-4%', strength: 'Moderate' },
                        { name: 'Zettle', type: 'Direct', description: 'PayPal\'s European card reader', marketShare: '2-3%', strength: 'Weak' },
                        { name: 'Nets (Nexi)', type: 'Direct', description: 'Nordic payment solutions', marketShare: '2-3%', strength: 'Moderate' },
                        { name: 'Concardis', type: 'Direct', description: 'German payment service provider', marketShare: '2-3%', strength: 'Weak' },
                        { name: 'Vivawallet', type: 'Direct', description: 'Cloud-based payment platform', marketShare: '1-2%', strength: 'Weak' }
                    );
                } else if (countryLower.includes('singapore') || countryLower.includes('malaysia') || 
                          countryLower.includes('thailand') || countryLower.includes('indonesia')) {
                    competitors.push(
                        { name: 'Grab Financial / GrabPay', type: 'Direct', description: 'Super-app payment solution across SEA', marketShare: '23-26%', strength: 'Strong' },
                        { name: 'Gojek / GoPay', type: 'Direct', description: 'Indonesian super-app payment', marketShare: '15-18%', strength: 'Strong' },
                        { name: 'ShopeePay', type: 'Direct', description: 'E-commerce platform payment solution', marketShare: '12-15%', strength: 'Strong' },
                        { name: countryLower.includes('singapore') ? '2C2P' : countryLower.includes('indonesia') ? 'Xendit' : 'iPay88', type: 'Direct', 
                          description: 'Regional payment gateway provider', marketShare: '10-12%', strength: 'Moderate' },
                        { name: countryLower.includes('indonesia') ? 'Midtrans (Gojek)' : 'Omise', type: 'Direct', 
                          description: 'Local payment gateway solutions', marketShare: '8-10%', strength: 'Moderate' },
                        { name: 'Stripe Southeast Asia', type: 'Direct', description: 'Expanding presence in SEA markets', marketShare: '6-8%', strength: 'Moderate' },
                        { name: 'PayPal (SEA)', type: 'Direct', description: 'International payment option', marketShare: '5-7%', strength: 'Moderate' },
                        { name: 'Razer Pay', type: 'Direct', description: 'E-wallet from gaming company', marketShare: '3-4%', strength: 'Weak' },
                        { name: 'Touch \'n Go eWallet', type: 'Direct', description: 'Malaysian e-wallet leader', marketShare: '4-5%', strength: 'Moderate' },
                        { name: 'Boost (Axiata)', type: 'Direct', description: 'Malaysian e-wallet', marketShare: '3-4%', strength: 'Weak' },
                        { name: 'TrueMoney', type: 'Direct', description: 'Thai mobile payment platform', marketShare: '2-3%', strength: 'Weak' }
                    );
                } else if (countryLower.includes('japan')) {
                    competitors.push(
                        { name: 'PayPay', type: 'Direct', description: 'Leading mobile payment app in Japan (SoftBank/Yahoo)', marketShare: '34-38%', strength: 'Strong' },
                        { name: 'LINE Pay', type: 'Direct', description: 'Payment service within LINE messaging app', marketShare: '13-16%', strength: 'Moderate' },
                        { name: 'Rakuten Pay', type: 'Direct', description: 'E-commerce giant\'s payment solution', marketShare: '11-13%', strength: 'Moderate' },
                        { name: 'au Pay (KDDI)', type: 'Direct', description: 'Telecom operator\'s payment service', marketShare: '8-10%', strength: 'Moderate' },
                        { name: 'd Payment (DoCoMo)', type: 'Direct', description: 'NTT DoCoMo mobile payment', marketShare: '7-9%', strength: 'Moderate' },
                        { name: 'GMO Payment Gateway', type: 'Direct', description: 'Major payment gateway provider in Japan', marketShare: '6-8%', strength: 'Strong' },
                        { name: 'Merpay (Mercari)', type: 'Direct', description: 'Payment from marketplace app', marketShare: '4-5%', strength: 'Moderate' },
                        { name: 'FamiPay', type: 'Direct', description: 'FamilyMart convenience store payment', marketShare: '3-4%', strength: 'Weak' },
                        { name: 'Stripe Japan', type: 'Direct', description: 'International platform with Japan support', marketShare: '2-3%', strength: 'Moderate' },
                        { name: 'PayPal Japan', type: 'Direct', description: 'Global payment platform', marketShare: '2-3%', strength: 'Weak' },
                        { name: 'Square Japan', type: 'Direct', description: 'POS and payment solutions', marketShare: '1-2%', strength: 'Weak' }
                    );
                } else if (countryLower.includes('africa') || countryLower.includes('kenya') || 
                          countryLower.includes('nigeria')) {
                    competitors.push(
                        { name: 'M-Pesa (Safaricom/Vodacom)', type: 'Direct', description: 'Mobile money platform dominant in East Africa', marketShare: '38-42%', strength: 'Strong' },
                        { name: countryLower.includes('nigeria') ? 'Flutterwave' : 'Paystack', type: 'Direct', 
                          description: 'Leading African payment gateway', marketShare: '18-22%', strength: 'Strong' },
                        { name: 'Interswitch', type: 'Direct', description: 'Major payment processing in Nigeria/Africa', marketShare: '12-15%', strength: 'Strong' },
                        { name: 'OPay', type: 'Direct', description: 'Mobile payment and financial services', marketShare: '8-10%', strength: 'Moderate' },
                        { name: 'PalmPay', type: 'Direct', description: 'Mobile payment platform', marketShare: '6-8%', strength: 'Moderate' },
                        { name: countryLower.includes('kenya') ? 'Airtel Money' : 'Kuda Bank', type: 'Direct', 
                          description: countryLower.includes('kenya') ? 'Mobile money service' : 'Digital bank with payments', marketShare: '4-6%', strength: 'Moderate' },
                        { name: 'Chipper Cash', type: 'Direct', description: 'Cross-border payment app', marketShare: '2-3%', strength: 'Weak' },
                        { name: 'Wave Mobile Money', type: 'Direct', description: 'Mobile money in West Africa', marketShare: '2-3%', strength: 'Weak' },
                        { name: 'Stripe Africa', type: 'Direct', description: 'Expanding in African markets', marketShare: '1-2%', strength: 'Weak' },
                        { name: 'Remita', type: 'Direct', description: 'Payment and collection platform', marketShare: '1-2%', strength: 'Weak' }
                    );
                } else {
                    // Default to US/North America competitors - EXPANDED
                    competitors.push(
                        { name: 'Stripe', type: 'Direct', description: 'Leading online payment processor with developer-friendly APIs', marketShare: '20-23%', strength: 'Strong' },
                        { name: 'PayPal', type: 'Direct', description: 'Digital payment platform with global reach', marketShare: '16-18%', strength: 'Strong' },
                        { name: 'Square (Block)', type: 'Direct', description: 'POS and payment solutions for small businesses', marketShare: '12-15%', strength: 'Strong' },
                        { name: 'Braintree (PayPal)', type: 'Direct', description: 'Payment gateway for online businesses', marketShare: '8-10%', strength: 'Strong' },
                        { name: 'Adyen', type: 'Direct', description: 'Global payment platform for enterprises', marketShare: '7-9%', strength: 'Moderate' },
                        { name: 'Authorize.net', type: 'Direct', description: 'Traditional payment gateway', marketShare: '6-8%', strength: 'Moderate' },
                        { name: 'Worldpay (FIS)', type: 'Direct', description: 'Payment processor and merchant services', marketShare: '5-7%', strength: 'Moderate' },
                        { name: 'Checkout.com', type: 'Direct', description: 'Global payment processing platform', marketShare: '3-4%', strength: 'Moderate' },
                        { name: 'Clover (Fiserv)', type: 'Direct', description: 'POS systems and payment processing', marketShare: '3-4%', strength: 'Moderate' },
                        { name: 'PayPal Zettle', type: 'Direct', description: 'Mobile card reader and payment app', marketShare: '2-3%', strength: 'Weak' },
                        { name: 'Apple Pay / Google Pay', type: 'Indirect', description: 'Digital wallet platforms', marketShare: '6-8%', strength: 'Moderate' },
                        { name: 'Venmo (PayPal)', type: 'Indirect', description: 'P2P payment app', marketShare: '2-3%', strength: 'Weak' },
                        { name: 'Zelle', type: 'Indirect', description: 'Bank-backed P2P payment network', marketShare: '3-4%', strength: 'Moderate' }
                    );
                }
            } else if (isFood) {
                // Country-specific food/restaurant competitors
                if (ideaLower.includes('coffee')) {
                    if (countryLower.includes('india')) {
                        competitors.push(
                            { name: 'Caf√© Coffee Day (CCD)', type: 'Direct', description: 'India\'s largest coffee chain with 1,500+ outlets', marketShare: '28-32%', strength: 'Strong' },
                            { name: 'Starbucks India', type: 'Direct', description: 'Premium international coffee chain (Tata partnership)', marketShare: '15-18%', strength: 'Strong' },
                            { name: 'Barista Coffee', type: 'Direct', description: 'Established Indian coffee chain', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Costa Coffee India', type: 'Direct', description: 'Coca-Cola owned coffee chain', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Chaayos', type: 'Direct', description: 'Tea & coffee cafe chain', marketShare: '4-6%', strength: 'Moderate' },
                            { name: 'Blue Tokai Coffee Roasters', type: 'Direct', description: 'Specialty coffee roaster and cafes', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Third Wave Coffee', type: 'Direct', description: 'Specialty coffee chain', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Sleepy Owl Coffee', type: 'Direct', description: 'Cold brew coffee brand with cafes', marketShare: '1-2%', strength: 'Weak' },
                            { name: 'Cafe Madras / Indian Coffee House', type: 'Direct', description: 'Traditional Indian coffee chains', marketShare: '3-5%', strength: 'Moderate' },
                            { name: 'Local Independent Cafes', type: 'Direct', description: 'Thousands of independent coffee shops', marketShare: '25-30%', strength: 'Strong' }
                        );
                    } else if (countryLower.includes('uk') || countryLower.includes('europe')) {
                        competitors.push(
                            { name: 'Costa Coffee', type: 'Direct', description: 'UK\'s largest coffee chain (Coca-Cola owned)', marketShare: '28-32%', strength: 'Strong' },
                            { name: 'Starbucks Europe', type: 'Direct', description: 'Global coffee chain with strong European presence', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'Caff√® Nero', type: 'Direct', description: 'Italian-style coffee chain', marketShare: '10-12%', strength: 'Moderate' },
                            { name: 'Pret A Manger', type: 'Indirect', description: 'Sandwich shop with coffee offerings', marketShare: '7-9%', strength: 'Moderate' },
                            { name: 'Greggs', type: 'Indirect', description: 'Bakery chain with coffee service', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'McCaf√© (McDonald\'s)', type: 'Indirect', description: 'Fast food coffee service', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Tchibo', type: 'Direct', description: 'German coffee chain and retailer', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Coffee #1', type: 'Direct', description: 'UK independent coffee chain', marketShare: '2-3%', strength: 'Weak' },
                            { name: '200 Degrees Coffee', type: 'Direct', description: 'Specialty coffee roaster and cafes', marketShare: '1-2%', strength: 'Weak' },
                            { name: 'Esquires Coffee', type: 'Direct', description: 'International coffee franchise', marketShare: '1-2%', strength: 'Weak' },
                            { name: 'Independent Cafes', type: 'Direct', description: 'Local specialty coffee shops', marketShare: '12-16%', strength: 'Moderate' }
                        );
                    } else if (countryLower.includes('australia')) {
                        competitors.push(
                            { name: 'Independent Cafes', type: 'Direct', description: 'Strong independent coffee culture dominates', marketShare: '55-60%', strength: 'Strong' },
                            { name: 'Gloria Jean\'s', type: 'Direct', description: 'Major Australian coffee chain', marketShare: '15-18%', strength: 'Strong' },
                            { name: 'The Coffee Club', type: 'Direct', description: 'Popular chain across Australia', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'McCaf√© Australia', type: 'Indirect', description: 'McDonald\'s coffee service', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Starbucks Australia', type: 'Direct', description: 'Limited presence (most stores closed)', marketShare: '3-4%', strength: 'Weak' },
                            { name: 'Hudson\'s Coffee', type: 'Direct', description: 'Airport and travel location coffee', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Zarraffa\'s Coffee', type: 'Direct', description: 'Drive-through coffee chain', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Muffin Break', type: 'Indirect', description: 'Bakery cafe chain', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Degani', type: 'Direct', description: 'Melbourne-based coffee chain', marketShare: '1-2%', strength: 'Weak' }
                        );
                    } else if (countryLower.includes('china')) {
                        competitors.push(
                            { name: 'Luckin Coffee', type: 'Direct', description: 'China\'s largest coffee chain by stores', marketShare: '32-36%', strength: 'Strong' },
                            { name: 'Starbucks China', type: 'Direct', description: 'International leader in premium segment', marketShare: '28-32%', strength: 'Strong' },
                            { name: 'Manner Coffee', type: 'Direct', description: 'Fast-growing budget coffee chain', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'M Stand', type: 'Direct', description: 'Trendy specialty coffee brand', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Seesaw Coffee', type: 'Direct', description: 'Specialty coffee roaster and cafes', marketShare: '3-4%', strength: 'Weak' },
                            { name: 'Pacific Coffee', type: 'Direct', description: 'Hong Kong-based coffee chain', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Costa Coffee China', type: 'Direct', description: 'UK chain with China operations', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Tim Hortons China', type: 'Direct', description: 'Canadian chain expanding in China', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Peet\'s Coffee China', type: 'Direct', description: 'US specialty coffee in China', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Local Chains', type: 'Direct', description: 'Regional coffee brands', marketShare: '8-12%', strength: 'Moderate' }
                        );
                    } else {
                        // US/Default - EXPANDED coffee competitors
                        competitors.push(
                            { name: 'Starbucks', type: 'Direct', description: 'Global coffee chain with 16,000+ US locations', marketShare: '38-42%', strength: 'Strong' },
                            { name: 'Dunkin\' Donuts', type: 'Direct', description: 'Value-oriented coffee and donut chain', marketShare: '22-25%', strength: 'Strong' },
                            { name: 'Tim Hortons', type: 'Direct', description: 'Canadian chain expanding in US', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Peet\'s Coffee', type: 'Direct', description: 'Premium coffee roaster and cafes', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Blue Bottle Coffee', type: 'Direct', description: 'Specialty coffee chain (Nestl√© owned)', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'The Coffee Bean & Tea Leaf', type: 'Direct', description: 'Premium coffee and tea chain', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Caribou Coffee', type: 'Direct', description: 'Coffee chain in midwest/northeast', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Dutch Bros Coffee', type: 'Direct', description: 'Drive-thru coffee chain', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'Philz Coffee', type: 'Direct', description: 'Customized coffee experience', marketShare: '1-2%', strength: 'Weak' },
                            { name: 'Einstein Bros. Bagels', type: 'Indirect', description: 'Bagel chain with coffee service', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Panera Bread', type: 'Indirect', description: 'Bakery-cafe with coffee offerings', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Local Independent Cafes', type: 'Direct', description: 'Thousands of specialty coffee shops', marketShare: '12-15%', strength: 'Moderate' }
                        );
                    }
                } else {
                    // General restaurant/food - EXPANDED
                    if (countryLower.includes('india')) {
                        competitors.push(
                            { name: 'Zomato', type: 'Indirect', description: 'Food delivery platform aggregating restaurants', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'Swiggy', type: 'Indirect', description: 'Leading food delivery aggregator', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'Local Restaurants & Dhabas', type: 'Direct', description: 'Independent eateries dominating market', marketShare: '35-40%', strength: 'Strong' },
                            { name: 'Jubilant FoodWorks (Domino\'s)', type: 'Direct', description: 'QSR chains - Domino\'s, Dunkin\'', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'McDonald\'s India', type: 'Direct', description: 'Fast food giant with local menu', marketShare: '4-6%', strength: 'Moderate' },
                            { name: 'KFC India', type: 'Direct', description: 'Yum! Brands chicken QSR', marketShare: '3-5%', strength: 'Moderate' },
                            { name: 'Rebel Foods (Faasos)', type: 'Direct', description: 'Cloud kitchen operator', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Burger King India', type: 'Direct', description: 'Fast food burger chain', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Pizza Hut India', type: 'Direct', description: 'Pizza QSR chain', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Wow! Momo', type: 'Direct', description: 'Indian QSR chain', marketShare: '1-2%', strength: 'Weak' },
                            { name: 'Biryani by Kilo', type: 'Direct', description: 'Cloud kitchen brand', marketShare: '1-2%', strength: 'Weak' }
                        );
                    } else if (countryLower.includes('china')) {
                        competitors.push(
                            { name: 'Meituan', type: 'Indirect', description: 'Dominant food delivery platform', marketShare: '32-36%', strength: 'Strong' },
                            { name: 'Ele.me (Alibaba)', type: 'Indirect', description: 'Major delivery aggregator', marketShare: '22-26%', strength: 'Strong' },
                            { name: 'Local Chain Restaurants', type: 'Direct', description: 'Regional Chinese restaurant chains', marketShare: '20-24%', strength: 'Strong' },
                            { name: 'KFC China (Yum China)', type: 'Direct', description: 'Leading Western QSR in China', marketShare: '6-8%', strength: 'Strong' },
                            { name: 'McDonald\'s China', type: 'Direct', description: 'Major fast food presence', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Haidilao', type: 'Direct', description: 'Popular hotpot restaurant chain', marketShare: '3-5%', strength: 'Moderate' },
                            { name: 'Xiabu Xiabu', type: 'Direct', description: 'Hotpot restaurant chain', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Dicos', type: 'Direct', description: 'Chinese fast food chain', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Pizza Hut China', type: 'Direct', description: 'Casual dining pizza', marketShare: '1-2%', strength: 'Weak' },
                            { name: 'Dairy Queen China', type: 'Direct', description: 'Ice cream and fast food', marketShare: '1-2%', strength: 'Weak' }
                        );
                    } else if (countryLower.includes('brazil')) {
                        competitors.push(
                            { name: 'iFood', type: 'Indirect', description: 'Leading food delivery platform', marketShare: '38-42%', strength: 'Strong' },
                            { name: 'Rappi', type: 'Indirect', description: 'Delivery super-app', marketShare: '15-18%', strength: 'Strong' },
                            { name: 'Local Restaurants', type: 'Direct', description: 'Independent eateries', marketShare: '25-30%', strength: 'Strong' },
                            { name: 'McDonald\'s Brazil', type: 'Direct', description: 'Fast food leader', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Burger King Brazil', type: 'Direct', description: 'Major burger chain', marketShare: '4-6%', strength: 'Moderate' },
                            { name: 'Subway Brazil', type: 'Direct', description: 'Sandwich chain', marketShare: '3-4%', strength: 'Weak' },
                            { name: 'Giraffas', type: 'Direct', description: 'Brazilian fast food chain', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Habib\'s', type: 'Direct', description: 'Middle Eastern fast food', marketShare: '2-3%', strength: 'Weak' }
                        );
                    } else {
                        // US/Default - EXPANDED
                        competitors.push(
                            { name: 'McDonald\'s', type: 'Direct', description: 'Largest QSR chain globally', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'DoorDash', type: 'Indirect', description: 'Leading food delivery platform', marketShare: '15-18%', strength: 'Strong' },
                            { name: 'Uber Eats', type: 'Indirect', description: 'Major delivery aggregator', marketShare: '12-15%', strength: 'Strong' },
                            { name: 'Starbucks (Food)', type: 'Indirect', description: 'Coffee chain with food service', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Chipotle', type: 'Direct', description: 'Fast-casual Mexican chain', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Subway', type: 'Direct', description: 'Sandwich chain', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Burger King', type: 'Direct', description: 'Fast food burger chain', marketShare: '4-6%', strength: 'Moderate' },
                            { name: 'Taco Bell', type: 'Direct', description: 'Mexican-inspired fast food', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Wendy\'s', type: 'Direct', description: 'Burger and fries chain', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Chick-fil-A', type: 'Direct', description: 'Chicken sandwich specialist', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Panera Bread', type: 'Direct', description: 'Fast-casual bakery cafe', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Local Independent Restaurants', type: 'Direct', description: 'Independent eateries', marketShare: '12-16%', strength: 'Moderate' }
                        );
                    }
                }
            } else if (isTech) {
                // Country-specific tech competitors - FULLY EXPANDED
                if (ideaLower.includes('ai') || ideaLower.includes('ml')) {
                    if (countryLower.includes('china')) {
                        competitors.push(
                            { name: 'Baidu AI / Ernie Bot', type: 'Direct', description: 'Chinese AI platform and LLM', marketShare: '28-32%', strength: 'Strong' },
                            { name: 'Alibaba Cloud AI', type: 'Direct', description: 'Cloud AI services from Alibaba', marketShare: '24-28%', strength: 'Strong' },
                            { name: 'Tencent AI', type: 'Direct', description: 'AI research and applications', marketShare: '14-16%', strength: 'Moderate' },
                            { name: 'SenseTime', type: 'Direct', description: 'Computer vision AI company', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Megvii (Face++)', type: 'Direct', description: 'Facial recognition AI', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'iFlytek', type: 'Direct', description: 'Voice AI and NLP', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'ByteDance AI Lab', type: 'Direct', description: 'TikTok parent company\'s AI division', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Huawei AI', type: 'Direct', description: 'Telecom giant\'s AI division', marketShare: '3-4%', strength: 'Weak' },
                            { name: '4Paradigm', type: 'Direct', description: 'Enterprise AI platform', marketShare: '2-3%', strength: 'Weak' }
                        );
                    } else {
                        // US/Global default - EXPANDED
                        competitors.push(
                            { name: 'OpenAI', type: 'Direct', description: 'Leading AI company (ChatGPT, GPT-4)', marketShare: '28-32%', strength: 'Strong' },
                            { name: 'Google DeepMind', type: 'Direct', description: 'Google\'s AI research division (Gemini)', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'Anthropic', type: 'Direct', description: 'AI safety-focused company (Claude)', marketShare: '14-16%', strength: 'Strong' },
                            { name: 'Microsoft Azure OpenAI', type: 'Direct', description: 'Enterprise AI through Azure', marketShare: '12-14%', strength: 'Strong' },
                            { name: 'Meta AI (FAIR)', type: 'Direct', description: 'Facebook\'s AI research (Llama)', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Amazon AWS AI', type: 'Direct', description: 'Cloud AI services', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Cohere', type: 'Direct', description: 'Enterprise LLM platform', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Stability AI', type: 'Direct', description: 'Generative AI (Stable Diffusion)', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Hugging Face', type: 'Indirect', description: 'Open-source AI platform', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'Scale AI', type: 'Direct', description: 'AI data platform', marketShare: '1-2%', strength: 'Weak' }
                        );
                    }
                } else if (ideaLower.includes('saas') || ideaLower.includes('crm') || ideaLower.includes('software')) {
                    if (countryLower.includes('india')) {
                        competitors.push(
                            { name: 'Zoho', type: 'Direct', description: 'Indian SaaS suite for businesses', marketShare: '24-28%', strength: 'Strong' },
                            { name: 'Freshworks', type: 'Direct', description: 'Customer engagement SaaS from India', marketShare: '14-16%', strength: 'Strong' },
                            { name: 'Salesforce', type: 'Direct', description: 'Global CRM leader with India presence', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'Microsoft Dynamics', type: 'Direct', description: 'Enterprise software suite', marketShare: '12-14%', strength: 'Moderate' },
                            { name: 'SAP India', type: 'Direct', description: 'Enterprise resource planning', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Oracle India', type: 'Direct', description: 'Database and business software', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Postman', type: 'Direct', description: 'API development platform', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'CleverTap', type: 'Direct', description: 'Customer engagement platform', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Chargebee', type: 'Direct', description: 'Subscription management SaaS', marketShare: '2-3%', strength: 'Weak' }
                        );
                    } else if (countryLower.includes('europe') || countryLower.includes('germany')) {
                        competitors.push(
                            { name: 'SAP', type: 'Direct', description: 'German enterprise software giant', marketShare: '28-32%', strength: 'Strong' },
                            { name: 'Salesforce', type: 'Direct', description: 'CRM leader with strong EU presence', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'Microsoft Dynamics', type: 'Direct', description: 'Business applications platform', marketShare: '14-16%', strength: 'Strong' },
                            { name: 'Oracle Europe', type: 'Direct', description: 'Database and enterprise software', marketShare: '10-12%', strength: 'Strong' },
                            { name: 'Pipedrive', type: 'Direct', description: 'Estonian CRM for sales teams', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Odoo', type: 'Direct', description: 'Belgian open-source ERP', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'TeamViewer', type: 'Direct', description: 'German remote access software', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Sage', type: 'Direct', description: 'UK accounting and business software', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Personio', type: 'Direct', description: 'German HR management SaaS', marketShare: '2-3%', strength: 'Weak' }
                        );
                    } else if (countryLower.includes('china')) {
                        competitors.push(
                            { name: 'Alibaba DingTalk', type: 'Direct', description: 'Enterprise collaboration platform', marketShare: '32-36%', strength: 'Strong' },
                            { name: 'Tencent WeChat Work', type: 'Direct', description: 'Business version of WeChat', marketShare: '24-28%', strength: 'Strong' },
                            { name: 'ByteDance Lark (Feishu)', type: 'Direct', description: 'Collaboration and productivity suite', marketShare: '12-15%', strength: 'Strong' },
                            { name: 'Kingdee', type: 'Direct', description: 'Chinese ERP and cloud services', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Yonyou', type: 'Direct', description: 'Enterprise management software', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Salesforce China', type: 'Direct', description: 'CRM with China operations', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'SAP China', type: 'Direct', description: 'Enterprise software', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Microsoft China', type: 'Direct', description: 'Office 365 and Dynamics', marketShare: '3-4%', strength: 'Moderate' }
                        );
                    } else {
                        // US/Default - EXPANDED
                        competitors.push(
                            { name: 'Salesforce', type: 'Direct', description: 'CRM and business software leader', marketShare: '22-26%', strength: 'Strong' },
                            { name: 'Microsoft 365 / Dynamics', type: 'Direct', description: 'Productivity and business apps', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'HubSpot', type: 'Direct', description: 'Inbound marketing and sales platform', marketShare: '12-15%', strength: 'Strong' },
                            { name: 'ServiceNow', type: 'Direct', description: 'Enterprise cloud workflow', marketShare: '8-10%', strength: 'Strong' },
                            { name: 'Workday', type: 'Direct', description: 'HR and financial management', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Oracle Cloud', type: 'Direct', description: 'Enterprise cloud applications', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Slack (Salesforce)', type: 'Direct', description: 'Team collaboration platform', marketShare: '5-6%', strength: 'Moderate' },
                            { name: 'Zoom', type: 'Direct', description: 'Video conferencing SaaS', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Atlassian', type: 'Direct', description: 'Project management and collaboration', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Adobe Creative Cloud', type: 'Indirect', description: 'Design software suite', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Monday.com', type: 'Direct', description: 'Work management platform', marketShare: '2-3%', strength: 'Weak' }
                        );
                    }
                } else {
                    // Generic tech/software
                    competitors.push(
                        { name: 'AWS / Google Cloud / Azure', type: 'Indirect', description: 'Cloud infrastructure platforms', marketShare: '30-35%', strength: 'Strong' },
                        { name: 'Established Tech Companies', type: 'Direct', description: 'Well-funded competitors with large user bases', marketShare: '25-30%', strength: 'Strong' },
                        { name: 'VC-Backed Startups', type: 'Direct', description: 'Innovative competitors with strong funding', marketShare: '15-20%', strength: 'Moderate' },
                        { name: 'Bootstrap SaaS / Open Source', type: 'Direct', description: 'Lean competitors with product-market fit', marketShare: '10-12%', strength: 'Moderate' }
                    );
                }
            } else if (isRetail) {
                // Country-specific retail competitors - FULLY EXPANDED
                if (ideaLower.includes('online') || ideaLower.includes('ecommerce') || ideaLower.includes('e-commerce') || ideaLower.includes('marketplace')) {
                    if (countryLower.includes('india')) {
                        competitors.push(
                            { name: 'Amazon India', type: 'Direct', description: 'E-commerce leader in India with vast selection', marketShare: '28-32%', strength: 'Strong' },
                            { name: 'Flipkart (Walmart)', type: 'Direct', description: 'India\'s homegrown e-commerce giant', marketShare: '28-31%', strength: 'Strong' },
                            { name: 'Meesho', type: 'Direct', description: 'Social commerce platform for small businesses', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Myntra', type: 'Direct', description: 'Fashion-focused e-commerce (Flipkart owned)', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Ajio (Reliance)', type: 'Direct', description: 'Fashion e-commerce by Reliance', marketShare: '4-6%', strength: 'Moderate' },
                            { name: 'Nykaa', type: 'Direct', description: 'Beauty and fashion e-commerce', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'BigBasket (Tata)', type: 'Direct', description: 'Online grocery platform', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Blinkit (Zomato)', type: 'Direct', description: 'Quick commerce grocery', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Snapdeal', type: 'Direct', description: 'Value-focused marketplace', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'JioMart (Reliance)', type: 'Direct', description: 'Reliance\'s grocery e-commerce', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'Tata Cliq', type: 'Direct', description: 'Tata Group\'s online marketplace', marketShare: '1-2%', strength: 'Weak' },
                            { name: 'Shopsy (Flipkart)', type: 'Direct', description: 'Social commerce arm of Flipkart', marketShare: '1-2%', strength: 'Weak' }
                        );
                    } else if (countryLower.includes('china')) {
                        competitors.push(
                            { name: 'Taobao (Alibaba)', type: 'Direct', description: 'China\'s largest C2C marketplace', marketShare: '28-32%', strength: 'Strong' },
                            { name: 'Tmall (Alibaba)', type: 'Direct', description: 'B2C platform for brands', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'JD.com', type: 'Direct', description: 'Major B2C e-commerce with own logistics', marketShare: '20-23%', strength: 'Strong' },
                            { name: 'Pinduoduo (Temu)', type: 'Direct', description: 'Social commerce with group buying', marketShare: '13-16%', strength: 'Strong' },
                            { name: 'Douyin Shop (ByteDance)', type: 'Direct', description: 'TikTok\'s live commerce platform', marketShare: '5-8%', strength: 'Moderate' },
                            { name: 'Kuaishou Commerce', type: 'Direct', description: 'Short video live commerce', marketShare: '3-5%', strength: 'Moderate' },
                            { name: 'Xiaohongshu (RED)', type: 'Indirect', description: 'Social commerce platform', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'Vipshop', type: 'Direct', description: 'Flash sales e-commerce', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Suning.com', type: 'Direct', description: 'Electronics retail chain', marketShare: '1-2%', strength: 'Weak' },
                            { name: 'Kaola (NetEase)', type: 'Direct', description: 'Cross-border import e-commerce', marketShare: '1-2%', strength: 'Weak' }
                        );
                    } else if (countryLower.includes('brazil')) {
                        competitors.push(
                            { name: 'Mercado Libre', type: 'Direct', description: 'Latin America\'s largest marketplace', marketShare: '32-36%', strength: 'Strong' },
                            { name: 'Amazon Brazil', type: 'Direct', description: 'Global giant expanding in Brazil', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'Shopee Brazil', type: 'Direct', description: 'Asian e-commerce expanding fast', marketShare: '14-18%', strength: 'Strong' },
                            { name: 'Magazine Luiza', type: 'Direct', description: 'Brazilian retail chain with strong online', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Americanas', type: 'Direct', description: 'Traditional Brazilian retailer', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Casas Bahia (Via Varejo)', type: 'Direct', description: 'Electronics and home goods retailer', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'OLX Brazil', type: 'Direct', description: 'Classifieds and C2C marketplace', marketShare: '3-4%', strength: 'Weak' },
                            { name: 'Netshoes (Magalu)', type: 'Direct', description: 'Sports goods e-commerce', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Dafiti', type: 'Direct', description: 'Fashion e-commerce platform', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Carrefour Brazil Online', type: 'Direct', description: 'Supermarket chain\'s online arm', marketShare: '2-3%', strength: 'Weak' }
                        );
                    } else if (countryLower.includes('europe') || countryLower.includes('germany') || countryLower.includes('uk')) {
                        competitors.push(
                            { name: 'Amazon Europe', type: 'Direct', description: 'Dominant e-commerce across Europe', marketShare: '28-32%', strength: 'Strong' },
                            { name: 'Zalando', type: 'Direct', description: 'Major European fashion e-commerce', marketShare: '8-10%', strength: 'Strong' },
                            { name: 'Otto Group', type: 'Direct', description: 'German e-commerce giant', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'eBay Europe', type: 'Direct', description: 'Auction and marketplace platform', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'ASOS', type: 'Direct', description: 'UK-based fashion e-commerce', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Shopify Stores', type: 'Direct', description: 'Independent merchants on Shopify', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Cdiscount', type: 'Direct', description: 'French e-commerce platform', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Allegro', type: 'Direct', description: 'Poland\'s dominant marketplace', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'Bol.com', type: 'Direct', description: 'Benelux e-commerce leader', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'Lidl Online / Aldi Online', type: 'Indirect', description: 'Supermarket chains going online', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Very / Littlewoods', type: 'Direct', description: 'UK catalogue retailers online', marketShare: '2-3%', strength: 'Weak' }
                        );
                    } else {
                        // US/Default - EXPANDED
                        competitors.push(
                            { name: 'Amazon', type: 'Direct', description: 'E-commerce giant, 38-40% US market share', marketShare: '38-40%', strength: 'Strong' },
                            { name: 'Walmart.com', type: 'Direct', description: 'Walmart\'s growing e-commerce', marketShare: '8-10%', strength: 'Strong' },
                            { name: 'Shopify Stores', type: 'Direct', description: 'Independent online stores', marketShare: '10-12%', strength: 'Moderate' },
                            { name: 'eBay', type: 'Direct', description: 'Auction and marketplace platform', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Etsy', type: 'Direct', description: 'Handmade and vintage marketplace', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Target.com', type: 'Direct', description: 'Target\'s online presence', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Wayfair', type: 'Direct', description: 'Home goods e-commerce', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Chewy', type: 'Direct', description: 'Pet supplies online', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Overstock / Bed Bath', type: 'Direct', description: 'Home goods e-commerce', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Best Buy Online', type: 'Direct', description: 'Electronics retailer online', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'Temu / Shein', type: 'Direct', description: 'Discount Chinese e-commerce', marketShare: '4-5%', strength: 'Moderate' }
                        );
                    }
                } else {
                    // Physical retail - FULLY EXPANDED
                    if (countryLower.includes('india')) {
                        competitors.push(
                            { name: 'Reliance Retail', type: 'Direct', description: 'India\'s largest retail chain (1800+ stores)', marketShare: '22-26%', strength: 'Strong' },
                            { name: 'DMart (Avenue Supermarts)', type: 'Direct', description: 'Value retail chain', marketShare: '12-15%', strength: 'Strong' },
                            { name: 'Big Bazaar (Future Group)', type: 'Direct', description: 'Hypermarket chain', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Spencer\'s Retail', type: 'Direct', description: 'Multi-format retail chain', marketShare: '4-5%', strength: 'Weak' },
                            { name: 'Star Bazaar (Tata)', type: 'Direct', description: 'Tata\'s hypermarket chain', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'More Retail (Amazon)', type: 'Direct', description: 'Amazon-owned supermarket chain', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Vishal Mega Mart', type: 'Direct', description: 'Value retail for mass market', marketShare: '3-4%', strength: 'Weak' },
                            { name: 'V-Mart Retail', type: 'Direct', description: 'Tier 2/3 city retailer', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Metro Cash & Carry', type: 'Direct', description: 'B2B wholesale retailer', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Local Kirana Stores', type: 'Direct', description: 'Traditional neighbourhood stores', marketShare: '35-40%', strength: 'Strong' }
                        );
                    } else if (countryLower.includes('uk')) {
                        competitors.push(
                            { name: 'Tesco', type: 'Direct', description: 'UK\'s largest supermarket chain', marketShare: '27-29%', strength: 'Strong' },
                            { name: 'Sainsbury\'s', type: 'Direct', description: 'Second-largest UK supermarket', marketShare: '15-17%', strength: 'Strong' },
                            { name: 'Asda (EG Group)', type: 'Direct', description: 'Value-focused supermarket', marketShare: '13-15%', strength: 'Strong' },
                            { name: 'Morrisons', type: 'Direct', description: 'Northern England focused chain', marketShare: '9-11%', strength: 'Moderate' },
                            { name: 'Aldi UK', type: 'Direct', description: 'German discount supermarket', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Lidl UK', type: 'Direct', description: 'German discount chain', marketShare: '7-9%', strength: 'Moderate' },
                            { name: 'Co-op Food', type: 'Direct', description: 'Community convenience stores', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Marks & Spencer Food', type: 'Direct', description: 'Premium food hall', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Waitrose', type: 'Direct', description: 'Upmarket supermarket (John Lewis)', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Iceland Foods', type: 'Direct', description: 'Frozen food specialist', marketShare: '2-3%', strength: 'Weak' }
                        );
                    } else {
                        // US/Default - EXPANDED
                        competitors.push(
                            { name: 'Walmart', type: 'Direct', description: 'World\'s largest retailer', marketShare: '25-28%', strength: 'Strong' },
                            { name: 'Amazon Fresh / Whole Foods', type: 'Direct', description: 'Amazon\'s physical retail', marketShare: '4-5%', strength: 'Strong' },
                            { name: 'Target', type: 'Direct', description: 'Mid-tier department store chain', marketShare: '12-14%', strength: 'Strong' },
                            { name: 'Costco', type: 'Direct', description: 'Membership warehouse club', marketShare: '9-11%', strength: 'Strong' },
                            { name: 'Kroger', type: 'Direct', description: 'America\'s largest supermarket chain', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Home Depot', type: 'Direct', description: 'Home improvement retail', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Walgreens / CVS', type: 'Indirect', description: 'Pharmacy and convenience retail', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Dollar General', type: 'Direct', description: 'Discount retail chain', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Lowe\'s', type: 'Direct', description: 'Home improvement chain', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Aldi / Lidl US', type: 'Direct', description: 'Discount grocery chains', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Local Boutiques / Independents', type: 'Direct', description: 'Independent specialty stores', marketShare: '8-10%', strength: 'Moderate' }
                        );
                    }
                }
            } else if (isService) {
                // Country-specific service competitors - FULLY EXPANDED
                if (ideaLower.includes('consult')) {
                    if (countryLower.includes('india')) {
                        competitors.push(
                            { name: 'Tata Consultancy Services (TCS)', type: 'Direct', description: 'India\'s largest IT and business consultancy', marketShare: '22-26%', strength: 'Strong' },
                            { name: 'Infosys', type: 'Direct', description: 'Global consulting and IT services', marketShare: '14-16%', strength: 'Strong' },
                            { name: 'Wipro', type: 'Direct', description: 'IT and business consulting giant', marketShare: '10-12%', strength: 'Strong' },
                            { name: 'HCL Technologies', type: 'Direct', description: 'IT services and consulting', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Deloitte India', type: 'Direct', description: 'Big Four with strong India operations', marketShare: '7-9%', strength: 'Strong' },
                            { name: 'PwC India', type: 'Direct', description: 'Professional services firm', marketShare: '6-8%', strength: 'Strong' },
                            { name: 'KPMG India', type: 'Direct', description: 'Audit and advisory services', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'EY India', type: 'Direct', description: 'Ernst & Young consulting', marketShare: '5-6%', strength: 'Moderate' },
                            { name: 'Accenture India', type: 'Direct', description: 'Technology and management consulting', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'McKinsey India', type: 'Direct', description: 'Premium strategy consulting', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'Boutique Consulting Firms', type: 'Direct', description: 'Specialized independent firms', marketShare: '10-14%', strength: 'Moderate' }
                        );
                    } else if (countryLower.includes('uk') || countryLower.includes('europe')) {
                        competitors.push(
                            { name: 'Deloitte UK/Europe', type: 'Direct', description: 'Largest professional services firm', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'PwC UK/Europe', type: 'Direct', description: 'Global professional services', marketShare: '16-18%', strength: 'Strong' },
                            { name: 'KPMG UK/Europe', type: 'Direct', description: 'Audit and advisory giant', marketShare: '12-15%', strength: 'Strong' },
                            { name: 'EY UK/Europe', type: 'Direct', description: 'Ernst & Young consulting', marketShare: '12-14%', strength: 'Strong' },
                            { name: 'Accenture', type: 'Direct', description: 'Technology and management consulting', marketShare: '10-12%', strength: 'Strong' },
                            { name: 'McKinsey UK/Europe', type: 'Direct', description: 'Premium strategy consulting', marketShare: '6-8%', strength: 'Strong' },
                            { name: 'BCG UK/Europe', type: 'Direct', description: 'Boston Consulting Group', marketShare: '5-7%', strength: 'Strong' },
                            { name: 'Bain & Company', type: 'Direct', description: 'Management consulting firm', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Oliver Wyman', type: 'Direct', description: 'Strategy and risk consulting', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Roland Berger', type: 'Direct', description: 'German strategy consultancy', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Boutique Firms', type: 'Direct', description: 'Industry-specialized consultancies', marketShare: '8-12%', strength: 'Moderate' }
                        );
                    } else {
                        // US/Default
                        competitors.push(
                            { name: 'Deloitte', type: 'Direct', description: 'Largest consulting firm globally', marketShare: '16-18%', strength: 'Strong' },
                            { name: 'PwC', type: 'Direct', description: 'Global professional services', marketShare: '14-16%', strength: 'Strong' },
                            { name: 'EY (Ernst & Young)', type: 'Direct', description: 'Advisory and assurance', marketShare: '12-14%', strength: 'Strong' },
                            { name: 'KPMG', type: 'Direct', description: 'Audit and advisory', marketShare: '10-12%', strength: 'Strong' },
                            { name: 'Accenture', type: 'Direct', description: 'Technology consulting giant', marketShare: '9-11%', strength: 'Strong' },
                            { name: 'McKinsey & Company', type: 'Direct', description: 'Top-tier strategy consulting', marketShare: '8-10%', strength: 'Strong' },
                            { name: 'Boston Consulting Group', type: 'Direct', description: 'Elite strategy consultancy', marketShare: '6-7%', strength: 'Strong' },
                            { name: 'Bain & Company', type: 'Direct', description: 'Management consulting', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'IBM Consulting', type: 'Direct', description: 'Tech-focused consulting', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Capgemini', type: 'Direct', description: 'French consulting firm', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Boutique / Independent', type: 'Direct', description: 'Specialized firms and solo consultants', marketShare: '10-14%', strength: 'Moderate' }
                        );
                    }
                } else {
                    // General services - FULLY EXPANDED
                    if (countryLower.includes('india')) {
                        competitors.push(
                            { name: 'Urban Company', type: 'Direct', description: 'On-demand home and beauty services', marketShare: '22-26%', strength: 'Strong' },
                            { name: 'UrbanClap / Housejoy', type: 'Direct', description: 'Home services marketplace', marketShare: '10-12%', strength: 'Moderate' },
                            { name: 'Sulekha', type: 'Indirect', description: 'Local services marketplace', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'JustDial', type: 'Indirect', description: 'Local business search and services', marketShare: '7-9%', strength: 'Moderate' },
                            { name: 'Upwork / Freelancer (India)', type: 'Indirect', description: 'Global freelance platforms', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Fiverr India', type: 'Indirect', description: 'Gig economy platform', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'TaskRabbit India', type: 'Direct', description: 'Task-based service marketplace', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Local Service Agencies', type: 'Direct', description: 'Regional service companies', marketShare: '30-35%', strength: 'Strong' },
                            { name: 'Dunzo (B2B services)', type: 'Indirect', description: 'On-demand delivery and services', marketShare: '2-3%', strength: 'Weak' }
                        );
                    } else {
                        // US/Global default
                        competitors.push(
                            { name: 'Upwork', type: 'Indirect', description: 'Largest freelance marketplace', marketShare: '22-25%', strength: 'Strong' },
                            { name: 'Fiverr', type: 'Indirect', description: 'Gig economy platform', marketShare: '15-18%', strength: 'Strong' },
                            { name: 'TaskRabbit (IKEA)', type: 'Direct', description: 'Local task and service marketplace', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Thumbtack', type: 'Direct', description: 'Local services marketplace', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Angi (Angie\'s List)', type: 'Direct', description: 'Home services marketplace', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'HomeAdvisor', type: 'Direct', description: 'Home improvement services', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Handy', type: 'Direct', description: 'Cleaning and handyman services', marketShare: '3-4%', strength: 'Weak' },
                            { name: 'Amazon Home Services', type: 'Indirect', description: 'Amazon\'s service marketplace', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Yelp (Services)', type: 'Indirect', description: 'Reviews and service booking', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'LinkedIn Services', type: 'Indirect', description: 'B2B service providers', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Local Independent Providers', type: 'Direct', description: 'Solo practitioners and small agencies', marketShare: '18-22%', strength: 'Moderate' }
                        );
                    }
                }
            } else {
                // Check for specialized sectors
                const isEnergy = ideaLower.includes('gas') || ideaLower.includes('energy') || 
                                ideaLower.includes('oil') || ideaLower.includes('fuel') || 
                                ideaLower.includes('petroleum') || ideaLower.includes('lpg');
                const isHealthcare = ideaLower.includes('health') || ideaLower.includes('medical') || 
                                    ideaLower.includes('clinic') || ideaLower.includes('hospital') ||
                                    ideaLower.includes('pharma');
                const isLogistics = ideaLower.includes('logistics') || ideaLower.includes('delivery') || 
                                   ideaLower.includes('shipping') || ideaLower.includes('transport') ||
                                   ideaLower.includes('courier');
                const isRealEstate = ideaLower.includes('real estate') || ideaLower.includes('property') || 
                                    ideaLower.includes('housing') || ideaLower.includes('rental');
                
                if (isEnergy) {
                    // Energy/Gas sector competitors - EXPANDED to 10+ companies
                    if (countryLower.includes('india')) {
                        competitors.push(
                            { name: 'Indian Oil Corporation (IOC)', type: 'Direct', description: 'India\'s largest oil & gas PSU, leading LPG distributor', marketShare: '28-32%', strength: 'Strong' },
                            { name: 'Bharat Petroleum (BPCL)', type: 'Direct', description: 'Major PSU in petroleum refining and LPG distribution', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'Hindustan Petroleum (HPCL)', type: 'Direct', description: 'Integrated PSU oil & gas company', marketShare: '14-16%', strength: 'Strong' },
                            { name: 'Reliance Industries (Jio-bp)', type: 'Direct', description: 'Private player in fuel retail and LPG', marketShare: '8-10%', strength: 'Strong' },
                            { name: 'Adani Gas (Adani Total Gas)', type: 'Direct', description: 'City gas distribution across multiple cities', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Indraprastha Gas Limited (IGL)', type: 'Direct', description: 'CNG and PNG distributor in Delhi-NCR', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Mahanagar Gas Limited (MGL)', type: 'Direct', description: 'Gas distribution in Mumbai region', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Gujarat Gas', type: 'Direct', description: 'Natural gas distributor in Gujarat', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'GAIL (Gas Authority of India)', type: 'Direct', description: 'Natural gas transmission and marketing', marketShare: '4-6%', strength: 'Moderate' },
                            { name: 'Torrent Gas', type: 'Direct', description: 'City gas distribution company', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Think Gas (Adani)', type: 'Direct', description: 'PNG and CNG distribution', marketShare: '2-3%', strength: 'Weak' }
                        );
                    } else if (countryLower.includes('uk') || countryLower.includes('europe')) {
                        competitors.push(
                            { name: 'British Gas / Centrica', type: 'Direct', description: 'UK\'s largest energy supplier', marketShare: '25-28%', strength: 'Strong' },
                            { name: 'E.ON / EDF Energy', type: 'Direct', description: 'Major European energy companies', marketShare: '20-25%', strength: 'Strong' },
                            { name: 'Shell Energy / BP', type: 'Direct', description: 'Oil majors with retail energy', marketShare: '15-18%', strength: 'Strong' },
                            { name: 'Octopus Energy / Bulb', type: 'Direct', description: 'New energy suppliers', marketShare: '10-12%', strength: 'Moderate' }
                        );
                    } else if (countryLower.includes('us') || countryLower.includes('united states')) {
                        competitors.push(
                            { name: 'ExxonMobil', type: 'Indirect', description: 'Largest US oil & gas supermajor', marketShare: '11-13%', strength: 'Strong' },
                            { name: 'Chevron', type: 'Indirect', description: 'Second-largest US integrated energy company', marketShare: '9-11%', strength: 'Strong' },
                            { name: 'ConocoPhillips', type: 'Direct', description: 'Major independent oil and gas producer', marketShare: '6-8%', strength: 'Strong' },
                            { name: 'Phillips 66', type: 'Direct', description: 'Refining and marketing company', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Marathon Petroleum', type: 'Direct', description: 'Refining and retail fuel operations', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Valero Energy', type: 'Direct', description: 'Petroleum refining and marketing', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Amerigas', type: 'Direct', description: 'Largest propane distributor in US', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Ferrellgas', type: 'Direct', description: 'National propane/LPG distributor', marketShare: '3-4%', strength: 'Weak' },
                            { name: 'UGI Corporation', type: 'Direct', description: 'Propane and natural gas distributor', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Suburban Propane', type: 'Direct', description: 'Propane distribution across 40+ states', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'National Grid', type: 'Direct', description: 'Natural gas utility (northeast US)', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Southern Company Gas', type: 'Direct', description: 'Natural gas distribution utility', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Dominion Energy', type: 'Direct', description: 'Major gas and electric utility', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Duke Energy', type: 'Direct', description: 'Electric and gas utility', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'Local Utility Companies', type: 'Direct', description: 'Regional gas utilities (state-specific)', marketShare: '22-26%', strength: 'Strong' }
                        );
                    } else if (countryLower.includes('uk') || countryLower.includes('europe') || countryLower.includes('germany') || countryLower.includes('france')) {
                        competitors.push(
                            { name: 'British Gas / Centrica', type: 'Direct', description: 'UK\'s largest energy supplier', marketShare: '23-26%', strength: 'Strong' },
                            { name: 'E.ON UK', type: 'Direct', description: 'German energy giant with UK operations', marketShare: '12-15%', strength: 'Strong' },
                            { name: 'EDF Energy', type: 'Direct', description: 'French state-owned energy company', marketShare: '10-13%', strength: 'Strong' },
                            { name: 'Shell Energy', type: 'Direct', description: 'Oil major with retail energy business', marketShare: '8-10%', strength: 'Strong' },
                            { name: 'Scottish Power (Iberdrola)', type: 'Direct', description: 'Major UK energy supplier', marketShare: '7-9%', strength: 'Moderate' },
                            { name: 'SSE Energy Services', type: 'Direct', description: 'Scottish energy provider', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Octopus Energy', type: 'Direct', description: 'Fast-growing renewable energy supplier', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Ovo Energy', type: 'Direct', description: 'Independent energy supplier', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Bulb Energy', type: 'Direct', description: 'Renewable energy provider', marketShare: '3-4%', strength: 'Weak' },
                            { name: 'BP Energy', type: 'Direct', description: 'Oil major\'s energy retail arm', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Utilita Energy', type: 'Direct', description: 'Smart meter focused supplier', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'TotalEnergies', type: 'Direct', description: 'French energy major', marketShare: '2-3%', strength: 'Moderate' }
                        );
                    } else if (countryLower.includes('middle east') || countryLower.includes('saudi') || countryLower.includes('uae') || countryLower.includes('qatar')) {
                        competitors.push(
                            { name: 'Saudi Aramco', type: 'Direct', description: 'World\'s largest oil company and gas producer', marketShare: '38-42%', strength: 'Strong' },
                            { name: 'ADNOC (Abu Dhabi)', type: 'Direct', description: 'Abu Dhabi National Oil Company', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'Qatar Petroleum (QatarEnergy)', type: 'Direct', description: 'State oil company, major LNG exporter', marketShare: '14-16%', strength: 'Strong' },
                            { name: 'Kuwait Petroleum Corporation', type: 'Direct', description: 'State-owned oil and gas company', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'ADCO (ADNOC)', type: 'Direct', description: 'Abu Dhabi Company for Onshore Operations', marketShare: '4-6%', strength: 'Moderate' },
                            { name: 'Dubai Natural Gas Company', type: 'Direct', description: 'Gas distribution in Dubai', marketShare: '3-5%', strength: 'Moderate' },
                            { name: 'ENOC Group', type: 'Direct', description: 'Emirates National Oil Company', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Shell Middle East', type: 'Direct', description: 'International oil major operations', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'BP Middle East', type: 'Direct', description: 'British oil major regional operations', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'TotalEnergies ME', type: 'Direct', description: 'French energy company in region', marketShare: '2-3%', strength: 'Weak' }
                        );
                    } else if (countryLower.includes('china')) {
                        competitors.push(
                            { name: 'PetroChina (CNPC)', type: 'Direct', description: 'China\'s largest oil and gas producer', marketShare: '35-38%', strength: 'Strong' },
                            { name: 'Sinopec', type: 'Direct', description: 'China Petroleum & Chemical Corporation', marketShare: '30-33%', strength: 'Strong' },
                            { name: 'CNOOC', type: 'Direct', description: 'China National Offshore Oil Corporation', marketShare: '12-15%', strength: 'Strong' },
                            { name: 'China Gas Holdings', type: 'Direct', description: 'Major city gas distributor', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'ENN Energy', type: 'Direct', description: 'Private gas distributor', marketShare: '4-6%', strength: 'Moderate' },
                            { name: 'Kunlun Energy', type: 'Direct', description: 'Natural gas distribution (PetroChina)', marketShare: '3-5%', strength: 'Moderate' },
                            { name: 'Beijing Gas', type: 'Direct', description: 'Gas supplier for Beijing region', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'Towngas China', type: 'Direct', description: 'Hong Kong-based gas distributor', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Shell China', type: 'Indirect', description: 'International operations', marketShare: '1-2%', strength: 'Weak' }
                        );
                    } else {
                        competitors.push(
                            { name: 'National Oil Companies', type: 'Direct', description: 'State-owned energy companies', marketShare: '35-40%', strength: 'Strong' },
                            { name: 'Shell / BP / Total', type: 'Direct', description: 'International oil majors', marketShare: '25-30%', strength: 'Strong' },
                            { name: 'Local Gas Distributors', type: 'Direct', description: 'Regional suppliers and utilities', marketShare: '20-25%', strength: 'Moderate' },
                            { name: 'Independent Suppliers', type: 'Direct', description: 'Private energy companies', marketShare: '10-15%', strength: 'Moderate' }
                        );
                    }
                } else if (isHealthcare) {
                    // Healthcare sector - FULLY EXPANDED
                    if (countryLower.includes('india')) {
                        competitors.push(
                            { name: 'Apollo Hospitals', type: 'Direct', description: 'India\'s largest hospital chain (71 hospitals)', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'Fortis Healthcare', type: 'Direct', description: 'Multi-specialty hospital network', marketShare: '12-15%', strength: 'Strong' },
                            { name: 'Max Healthcare', type: 'Direct', description: 'Premium healthcare provider in north India', marketShare: '10-12%', strength: 'Strong' },
                            { name: 'Narayana Health', type: 'Direct', description: 'Affordable cardiac and multi-specialty care', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Manipal Hospitals', type: 'Direct', description: 'Pan-India hospital chain', marketShare: '7-9%', strength: 'Moderate' },
                            { name: 'Aster DM Healthcare', type: 'Direct', description: 'Gulf-India hospital network', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Practo', type: 'Indirect', description: 'Healthcare platform for doctor discovery', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'PharmEasy / Tata 1mg', type: 'Indirect', description: 'Online pharmacy platforms', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Medanta', type: 'Direct', description: 'Super-specialty hospital group', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Columbia Asia (Manipal)', type: 'Direct', description: 'Multi-city hospital chain', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Local Clinics & Nursing Homes', type: 'Direct', description: 'Independent healthcare providers', marketShare: '25-30%', strength: 'Strong' }
                        );
                    } else if (countryLower.includes('us') || countryLower.includes('united states')) {
                        competitors.push(
                            { name: 'HCA Healthcare', type: 'Direct', description: 'Largest for-profit hospital operator (180+ hospitals)', marketShare: '14-16%', strength: 'Strong' },
                            { name: 'Kaiser Permanente', type: 'Direct', description: 'Largest managed care consortium', marketShare: '10-12%', strength: 'Strong' },
                            { name: 'CommonSpirit Health', type: 'Direct', description: 'Non-profit hospital system', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Ascension Health', type: 'Direct', description: 'Catholic healthcare system', marketShare: '7-9%', strength: 'Moderate' },
                            { name: 'CVS Health / MinuteClinic', type: 'Indirect', description: 'Pharmacy with walk-in clinics', marketShare: '6-8%', strength: 'Strong' },
                            { name: 'Walgreens Health', type: 'Indirect', description: 'Pharmacy chain with health clinics', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Teladoc / Telemedicine', type: 'Indirect', description: 'Virtual care platform', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'UnitedHealth Group (Optum)', type: 'Direct', description: 'Health services and analytics', marketShare: '5-7%', strength: 'Strong' },
                            { name: 'Mayo Clinic', type: 'Direct', description: 'Prestigious non-profit medical center', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'Cleveland Clinic', type: 'Direct', description: 'Academic medical center', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'Independent Practices', type: 'Direct', description: 'Local clinics and practitioners', marketShare: '30-35%', strength: 'Moderate' }
                        );
                    } else {
                        // UK/Europe/Global
                        competitors.push(
                            { name: 'NHS (National Health Service)', type: 'Indirect', description: 'UK\'s public healthcare system', marketShare: '55-60%', strength: 'Strong' },
                            { name: 'Spire Healthcare', type: 'Direct', description: 'Largest private hospital group in UK', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Nuffield Health', type: 'Direct', description: 'Non-profit private healthcare', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Bupa', type: 'Direct', description: 'International health insurance and care', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'HCA UK', type: 'Direct', description: 'US hospital chain\'s UK operations', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'BMI Healthcare (Circle)', type: 'Direct', description: 'Private hospital group', marketShare: '3-4%', strength: 'Weak' },
                            { name: 'Babylon Health', type: 'Indirect', description: 'Digital health platform', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Doctorlink / Livi', type: 'Indirect', description: 'Telemedicine platforms', marketShare: '2-3%', strength: 'Weak' }
                        );
                    }
                } else if (isLogistics) {
                    // Logistics sector - FULLY EXPANDED
                    if (countryLower.includes('india')) {
                        competitors.push(
                            { name: 'Delhivery', type: 'Direct', description: 'India\'s largest 3PL logistics company', marketShare: '22-26%', strength: 'Strong' },
                            { name: 'Blue Dart (DHL)', type: 'Direct', description: 'Premium courier, DHL partner', marketShare: '16-18%', strength: 'Strong' },
                            { name: 'Ecom Express', type: 'Direct', description: 'E-commerce focused logistics', marketShare: '14-16%', strength: 'Strong' },
                            { name: 'Xpressbees', type: 'Direct', description: 'Fast-growing logistics startup', marketShare: '10-12%', strength: 'Moderate' },
                            { name: 'Shadowfax', type: 'Direct', description: 'Hyperlocal logistics platform', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Ekart (Flipkart)', type: 'Direct', description: 'Flipkart\'s logistics arm', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Amazon Logistics India', type: 'Direct', description: 'Amazon\'s delivery network', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'India Post', type: 'Indirect', description: 'Government postal and logistics', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'DTDC', type: 'Direct', description: 'Pan-India courier company', marketShare: '4-5%', strength: 'Weak' },
                            { name: 'Gati (Allcargo)', type: 'Direct', description: 'Express logistics company', marketShare: '3-4%', strength: 'Weak' },
                            { name: 'DHL India', type: 'Direct', description: 'International logistics', marketShare: '2-3%', strength: 'Moderate' }
                        );
                    } else if (countryLower.includes('us') || countryLower.includes('united states')) {
                        competitors.push(
                            { name: 'UPS', type: 'Direct', description: 'Package delivery giant (21M packages/day)', marketShare: '28-32%', strength: 'Strong' },
                            { name: 'FedEx', type: 'Direct', description: 'Express shipping and logistics leader', marketShare: '24-27%', strength: 'Strong' },
                            { name: 'Amazon Logistics (AMZL)', type: 'Direct', description: 'Amazon\'s in-house delivery network', marketShare: '18-22%', strength: 'Strong' },
                            { name: 'USPS', type: 'Indirect', description: 'US Postal Service', marketShare: '12-15%', strength: 'Moderate' },
                            { name: 'XPO Logistics', type: 'Direct', description: 'Major freight logistics company', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'C.H. Robinson', type: 'Direct', description: 'Freight broker and logistics', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'DHL US', type: 'Direct', description: 'International logistics in US', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'J.B. Hunt', type: 'Direct', description: 'Trucking and intermodal transport', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'Old Dominion Freight', type: 'Direct', description: 'Less-than-truckload carrier', marketShare: '2-3%', strength: 'Moderate' },
                            { name: 'Instacart', type: 'Indirect', description: 'Grocery delivery platform', marketShare: '1-2%', strength: 'Weak' }
                        );
                    } else {
                        // Europe/UK/Global - EXPANDED
                        competitors.push(
                            { name: 'DHL (Deutsche Post)', type: 'Direct', description: 'World\'s largest logistics company', marketShare: '28-32%', strength: 'Strong' },
                            { name: 'UPS Europe', type: 'Direct', description: 'US giant with strong European presence', marketShare: '14-16%', strength: 'Strong' },
                            { name: 'FedEx Europe', type: 'Direct', description: 'Express logistics across Europe', marketShare: '12-14%', strength: 'Strong' },
                            { name: 'Royal Mail / Parcelforce', type: 'Direct', description: 'UK national postal service', marketShare: '10-12%', strength: 'Moderate' },
                            { name: 'DPD Group', type: 'Direct', description: 'Parcel delivery network', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'GLS (General Logistics)', type: 'Direct', description: 'European parcel service', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Hermes / Evri', type: 'Direct', description: 'UK parcel delivery', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Amazon Logistics EU', type: 'Direct', description: 'Amazon\'s European delivery', marketShare: '4-6%', strength: 'Moderate' },
                            { name: 'PostNL', type: 'Direct', description: 'Dutch postal operator', marketShare: '3-4%', strength: 'Weak' },
                            { name: 'Colis Prive / Colissimo', type: 'Direct', description: 'French logistics companies', marketShare: '2-3%', strength: 'Weak' }
                        );
                    }
                } else if (isRealEstate) {
                    // Real Estate sector - FULLY EXPANDED
                    if (countryLower.includes('india')) {
                        competitors.push(
                            { name: 'MagicBricks (Times Group)', type: 'Indirect', description: 'India\'s largest property portal', marketShare: '22-26%', strength: 'Strong' },
                            { name: '99acres (Info Edge)', type: 'Indirect', description: 'Major online property listing platform', marketShare: '20-23%', strength: 'Strong' },
                            { name: 'Housing.com (PropTiger)', type: 'Indirect', description: 'Online property search and listings', marketShare: '14-16%', strength: 'Strong' },
                            { name: 'DLF Limited', type: 'Direct', description: 'India\'s largest real estate developer', marketShare: '8-10%', strength: 'Moderate' },
                            { name: 'Godrej Properties', type: 'Direct', description: 'Premium developer (Godrej Group)', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Prestige Group', type: 'Direct', description: 'South India\'s largest developer', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'NoBroker', type: 'Direct', description: 'No-brokerage rental platform', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Lodha Group', type: 'Direct', description: 'Mumbai-based premium developer', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Sobha Limited', type: 'Direct', description: 'South India premium developer', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Anarock Property', type: 'Indirect', description: 'Real estate consultancy', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Local Real Estate Agents', type: 'Direct', description: 'Independent brokers nationwide', marketShare: '10-14%', strength: 'Strong' }
                        );
                    } else if (countryLower.includes('us') || countryLower.includes('united states')) {
                        competitors.push(
                            { name: 'Zillow', type: 'Indirect', description: 'Largest online real estate marketplace', marketShare: '22-26%', strength: 'Strong' },
                            { name: 'Realtor.com (Move Inc.)', type: 'Indirect', description: 'MLS-backed listing aggregator', marketShare: '16-18%', strength: 'Strong' },
                            { name: 'Redfin', type: 'Direct', description: 'Tech-powered real estate brokerage', marketShare: '10-12%', strength: 'Strong' },
                            { name: 'Opendoor', type: 'Direct', description: 'iBuyer platform for direct home sales', marketShare: '6-8%', strength: 'Moderate' },
                            { name: 'Keller Williams Realty', type: 'Direct', description: 'Largest real estate franchise by agents', marketShare: '8-10%', strength: 'Strong' },
                            { name: 'RE/MAX', type: 'Direct', description: 'Global real estate franchise', marketShare: '5-7%', strength: 'Moderate' },
                            { name: 'Coldwell Banker (Anywhere)', type: 'Direct', description: 'Established national brokerage', marketShare: '4-5%', strength: 'Moderate' },
                            { name: 'Century 21', type: 'Direct', description: 'Global real estate brand', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Compass', type: 'Direct', description: 'Tech-enabled luxury brokerage', marketShare: '3-4%', strength: 'Moderate' },
                            { name: 'Offerpad', type: 'Direct', description: 'iBuyer platform', marketShare: '2-3%', strength: 'Weak' },
                            { name: 'Independent Agents / Brokers', type: 'Direct', description: 'Local real estate professionals', marketShare: '12-15%', strength: 'Moderate' }
                        );
                    } else {
                        competitors.push(
                            { name: 'Online Property Portals', type: 'Indirect', description: 'Digital listing platforms', marketShare: '30-35%', strength: 'Strong' },
                            { name: 'Major Real Estate Agencies', type: 'Direct', description: 'Established property firms', marketShare: '28-32%', strength: 'Strong' },
                            { name: 'National Developers', type: 'Direct', description: 'Large-scale property developers', marketShare: '18-22%', strength: 'Moderate' },
                            { name: 'Independent Agents', type: 'Direct', description: 'Local real estate brokers', marketShare: '15-20%', strength: 'Moderate' }
                        );
                    }
                } else {
                    // Generic fallback
                    competitors.push(
                        { name: 'Industry Market Leader', type: 'Direct', description: 'Dominant player with significant brand recognition', marketShare: '25-35%', strength: 'Strong' },
                        { name: 'Established Competitors', type: 'Direct', description: 'Well-funded players with solid market presence', marketShare: '20-25%', strength: 'Moderate' },
                        { name: 'Regional Players', type: 'Direct', description: 'Local/regional competitors with loyal customers', marketShare: '15-20%', strength: 'Moderate' },
                        { name: 'Niche Specialists', type: 'Direct', description: 'Focused competitors serving specific segments', marketShare: '10-15%', strength: 'Moderate' }
                    );
                }
            }
            
            return competitors;
        }

        function generateDifferentiation(idea, isFood, isTech, isRetail, isService) {
            const strategies = [];
            
            if (isFood) {
                strategies.push(
                    'Focus on locally-sourced, organic ingredients with transparent supply chain',
                    'Create unique ambiance and community space (co-working, events, local art)',
                    'Develop signature products or flavors not available from chains',
                    'Implement sustainability practices (zero waste, compostable packaging, carbon neutral)',
                    'Build strong local partnerships and support community causes'
                );
            } else if (isTech) {
                strategies.push(
                    'Solve a specific pain point better than generic solutions (niche focus)',
                    'Offer superior user experience with simpler, more intuitive interface',
                    'Provide exceptional customer support and onboarding',
                    'Build for a specific industry vertical with tailored features',
                    'Compete on pricing with more transparent, flexible plans'
                );
            } else if (isRetail) {
                strategies.push(
                    'Curate unique product selection not available in mass market',
                    'Provide personalized customer service and shopping experience',
                    'Build strong brand story and values-driven positioning',
                    'Offer omnichannel experience (seamless online and offline)',
                    'Create loyalty program and community around the brand'
                );
            } else if (isService) {
                strategies.push(
                    'Specialize in a specific industry or problem type',
                    'Deliver faster turnaround times with more responsive service',
                    'Offer unique methodology or framework',
                    'Provide transparent pricing and clear deliverables',
                    'Build thought leadership through content and education'
                );
            } else {
                strategies.push(
                    'Differentiate on quality and attention to detail',
                    'Build strong brand and unique positioning',
                    'Provide exceptional customer experience',
                    'Innovate on business model or service delivery',
                    'Focus on underserved market segment or niche'
                );
            }
            
            return strategies;
        }

        function generateResources(idea, country, isFood, isTech, isRetail, isService) {
            const resources = {
                technology: [],
                physical: [],
                human: [],
                marketing: [],
                legal: []
            };
            
            // Technology & Software
            if (isTech) {
                resources.technology = [
                    { name: 'Cloud Infrastructure (AWS/GCP)', purpose: 'Hosting and scalability', cost: '$200-500/mo' },
                    { name: 'Development Tools & IDEs', purpose: 'Code development environment', cost: '$100-300/mo' },
                    { name: 'Analytics & Monitoring', purpose: 'Track performance and usage', cost: '$100-400/mo' },
                    { name: 'Customer Support Platform', purpose: 'Help desk and ticketing', cost: '$50-200/mo' },
                    { name: 'Payment Processing', purpose: 'Accept customer payments', cost: '2.9% + $0.30/txn' },
                    { name: 'Marketing Automation', purpose: 'Email and campaign management', cost: '$50-300/mo' }
                ];
            } else {
                resources.technology = [
                    { name: 'POS System', purpose: 'Sales transactions and inventory', cost: '$50-150/mo' },
                    { name: 'Website & E-commerce', purpose: 'Online presence and sales', cost: '$30-100/mo' },
                    { name: 'Accounting Software', purpose: 'Financial management', cost: '$30-70/mo' },
                    { name: 'Social Media Tools', purpose: 'Content scheduling and analytics', cost: '$20-100/mo' },
                    { name: 'CRM System', purpose: 'Customer relationship management', cost: '$25-100/mo' },
                    { name: 'Email Marketing', purpose: 'Customer communications', cost: '$20-80/mo' }
                ];
            }
            
            // Physical Resources
            if (isFood || isRetail) {
                resources.physical = [
                    { name: 'Retail/Cafe Space', purpose: 'Physical location (500-1500 sq ft)', cost: '$2k-5k/mo' },
                    { name: 'Equipment & Fixtures', purpose: isFood ? 'Coffee machines, refrigeration' : 'Display fixtures, furniture', cost: '$15k-40k' },
                    { name: 'Initial Inventory', purpose: 'Starting stock and supplies', cost: '$5k-20k' },
                    { name: 'Signage & Decor', purpose: 'Branding and ambiance', cost: '$3k-10k' },
                    { name: 'Storage & Back Office', purpose: 'Inventory and operations space', cost: 'Included' },
                    { name: 'Security System', purpose: 'Surveillance and protection', cost: '$1k-3k' }
                ];
            } else if (isTech) {
                resources.physical = [
                    { name: 'Office Space (Optional)', purpose: 'Team workspace if not remote', cost: '$500-2k/mo' },
                    { name: 'Computers & Laptops', purpose: 'Development workstations', cost: '$2k-4k each' },
                    { name: 'Monitors & Peripherals', purpose: 'Additional equipment', cost: '$500-1k' },
                    { name: 'Server/Testing Equipment', purpose: 'Development and testing', cost: '$2k-5k' }
                ];
            } else {
                resources.physical = [
                    { name: 'Office/Meeting Space', purpose: 'Client meetings and work', cost: '$500-2k/mo' },
                    { name: 'Office Furniture', purpose: 'Desks, chairs, conference table', cost: '$2k-5k' },
                    { name: 'Computers & Equipment', purpose: 'Work devices', cost: '$2k-4k' },
                    { name: 'Professional Materials', purpose: 'Industry-specific tools', cost: '$1k-5k' }
                ];
            }
            
            // Human Resources
            if (isFood || isRetail) {
                resources.human = [
                    { role: 'You (Founder/Manager)', description: 'Overall operations, strategy, finances', timing: 'Day 1' },
                    { role: 'Staff (2-3 part-time)', description: 'Customer service, operations support', timing: 'Month 1-3' },
                    { role: 'Marketing Specialist', description: 'Social media, promotions (contract/part-time)', timing: 'Month 3-6' },
                    { role: 'Additional Staff', description: 'Scale team as revenue grows', timing: 'Month 6-12' }
                ];
            } else if (isTech) {
                resources.human = [
                    { role: 'Technical Co-founder/Lead Dev', description: 'Product development and architecture', timing: 'Day 1' },
                    { role: 'Additional Developer(s)', description: 'Feature development, maintenance', timing: 'Month 3-6' },
                    { role: 'Designer (UX/UI)', description: 'User interface and experience', timing: 'Month 1-6' },
                    { role: 'Sales/Customer Success', description: 'User acquisition and retention', timing: 'Month 6-12' }
                ];
            } else {
                resources.human = [
                    { role: 'You (Lead Consultant)', description: 'Client delivery and business development', timing: 'Day 1' },
                    { role: 'Virtual Assistant', description: 'Admin support, scheduling', timing: 'Month 3-6' },
                    { role: 'Junior Consultant', description: 'Delivery support as volume grows', timing: 'Month 6-12' },
                    { role: 'Sales/BD Support', description: 'Lead generation and outreach', timing: 'Year 2' }
                ];
            }
            
            // Marketing Channels
            resources.marketing = [
                { name: 'Social Media Advertising', purpose: 'Facebook, Instagram, LinkedIn ads', cost: '$500-2k/mo' },
                { name: 'Google Ads / SEO', purpose: 'Search visibility and traffic', cost: '$300-1.5k/mo' },
                { name: 'Content Marketing', purpose: 'Blog, videos, educational content', cost: '$200-800/mo' },
                { name: 'Local Partnerships', purpose: 'Cross-promotions and referrals', cost: 'Minimal' },
                { name: 'Email Marketing', purpose: 'Customer retention and promotions', cost: '$50-200/mo' },
                { name: 'Events/Sponsorships', purpose: 'Brand awareness and networking', cost: '$500-2k/quarter' }
            ];
            
            // Legal & Compliance
            resources.legal = [
                { requirement: 'Business Registration', details: `LLC or Corporation formation in ${country}`, priority: 'Critical' },
                { requirement: 'Business Licenses', details: isFood ? 'Food service permits, health inspections' : 'General business license', priority: 'Critical' },
                { requirement: 'Insurance', details: 'Liability, property, and business insurance', priority: 'Critical' },
                { requirement: 'Tax Registration', details: 'Sales tax, employer ID, tax accounts', priority: 'Critical' },
                { requirement: 'Contracts & Agreements', details: 'Customer agreements, vendor contracts', priority: 'Important' },
                { requirement: 'Trademark/IP Protection', details: 'Protect brand name and assets', priority: 'Important' },
                { requirement: 'Data Privacy Compliance', details: isTech ? 'GDPR, CCPA compliance' : 'Customer data protection', priority: isTech ? 'Critical' : 'Important' }
            ];
            
            return resources;
        }

        function generatePaymentPartnership(country) {
            const countryLower = country.toLowerCase();
            
            // Determine payment providers based on country
            let providers = [];
            
            if (countryLower.includes('india')) {
                providers = [
                    {
                        name: 'Razorpay',
                        description: 'Leading payment gateway in India with comprehensive features',
                        fee: '2% + GST (standard), Custom for high volume',
                        setupTime: '1-2 weeks'
                    },
                    {
                        name: 'Paytm Payment Gateway',
                        description: 'Integrated with Paytm wallet, wide merchant acceptance',
                        fee: '1.99% + GST',
                        setupTime: '2-3 weeks'
                    },
                    {
                        name: 'PhonePe Switch / PayU',
                        description: 'UPI-focused payment solutions with competitive rates',
                        fee: '1.8% - 2.2% + GST',
                        setupTime: '1-2 weeks'
                    },
                    {
                        name: 'CCAvenue / Instamojo',
                        description: 'Established payment gateways for Indian SMBs',
                        fee: '2% - 2.5% + GST',
                        setupTime: '1 week'
                    }
                ];
            } else if (countryLower.includes('china')) {
                providers = [
                    {
                        name: 'Alipay (Ant Group)',
                        description: 'Dominant payment platform with 1B+ users',
                        fee: '0.6% - 1.2% (varies by industry)',
                        setupTime: '4-6 weeks'
                    },
                    {
                        name: 'WeChat Pay',
                        description: 'Integrated payment in WeChat ecosystem',
                        fee: '0.6% - 1% (varies)',
                        setupTime: '4-6 weeks'
                    },
                    {
                        name: 'UnionPay',
                        description: 'China\'s national card payment network',
                        fee: '1% - 1.5%',
                        setupTime: '3-4 weeks'
                    }
                ];
            } else if (countryLower.includes('brazil')) {
                providers = [
                    {
                        name: 'Pix Integration',
                        description: 'Brazil\'s instant payment system (free for consumers)',
                        fee: 'Varies by bank, typically R$0.01 - R$0.50/transaction',
                        setupTime: '2-3 weeks'
                    },
                    {
                        name: 'Mercado Pago',
                        description: 'Full-service payment platform with installment options',
                        fee: '3.99% - 5.99% + R$0.40',
                        setupTime: '1-2 weeks'
                    },
                    {
                        name: 'PagSeguro',
                        description: 'Digital payment and POS solutions',
                        fee: '3.49% - 4.99% + R$0.40',
                        setupTime: '1-2 weeks'
                    },
                    {
                        name: 'Stripe Brazil',
                        description: 'International platform expanding in Brazil',
                        fee: '3.99% + R$0.40',
                        setupTime: '2-3 weeks'
                    }
                ];
            } else if (countryLower.includes('uk') || countryLower.includes('united kingdom')) {
                providers = [
                    {
                        name: 'Stripe UK',
                        description: 'Leading online payment processor',
                        fee: '1.5% + ¬£0.20 (UK cards), 2.5% + ¬£0.20 (non-UK)',
                        setupTime: '1-2 weeks'
                    },
                    {
                        name: 'Worldpay (FIS)',
                        description: 'Major UK payment processor',
                        fee: 'Custom pricing, typically 1.2% - 2.5%',
                        setupTime: '2-4 weeks'
                    },
                    {
                        name: 'Adyen',
                        description: 'Unified commerce platform',
                        fee: 'Interchange++ (0.60% - 0.80%)',
                        setupTime: '2-3 weeks'
                    },
                    {
                        name: 'SumUp / Zettle',
                        description: 'SMB-focused payment solutions',
                        fee: '1.69% (card reader), 2.5% (online)',
                        setupTime: '1 week'
                    }
                ];
            } else if (countryLower.includes('germany') || countryLower.includes('france') || 
                       countryLower.includes('europe') || countryLower.includes('eu')) {
                providers = [
                    {
                        name: 'Adyen',
                        description: 'European payment leader with unified platform',
                        fee: 'Interchange++ (0.60% - 0.80% + scheme fees)',
                        setupTime: '2-3 weeks'
                    },
                    {
                        name: 'Stripe Europe',
                        description: 'Developer-friendly with strong EU support',
                        fee: '1.5% + ‚Ç¨0.25 (EU cards), 2.9% + ‚Ç¨0.25 (non-EU)',
                        setupTime: '1-2 weeks'
                    },
                    {
                        name: 'Mollie',
                        description: 'Popular European payment service provider',
                        fee: '0.29‚Ç¨ + 0.25% (iDEAL), varies by method',
                        setupTime: '1-2 weeks'
                    },
                    {
                        name: 'Worldline',
                        description: 'European leader in payment services',
                        fee: 'Custom pricing based on volume',
                        setupTime: '3-4 weeks'
                    }
                ];
            } else if (countryLower.includes('singapore') || countryLower.includes('malaysia') ||
                       countryLower.includes('thailand') || countryLower.includes('indonesia')) {
                const singaporeProviders = [
                    { name: '2C2P', desc: 'Regional payment gateway leader', fee: '2.8% - 3.5%' },
                    { name: 'Stripe Southeast Asia', desc: 'Expanding in SEA markets', fee: '2.9% + SGD 0.50' },
                    { name: 'PayPal (SEA)', desc: 'International payment option', fee: '3.4% + SGD 0.50' }
                ];
                const indonesiaProviders = [
                    { name: 'Xendit', desc: 'Leading Indonesian payment gateway', fee: '2.9% + IDR 2,000' },
                    { name: 'Midtrans (Gojek)', desc: 'Payment solution from Gojek', fee: '2% - 3%' },
                    { name: 'Doku', desc: 'Established payment gateway', fee: '2.5% - 3.5%' }
                ];
                
                const localProviders = countryLower.includes('indonesia') ? indonesiaProviders : singaporeProviders;
                providers = localProviders.map((p, i) => ({
                    name: p.name,
                    description: p.desc,
                    fee: p.fee,
                    setupTime: i === 0 ? '1-2 weeks' : '2-3 weeks'
                }));
            } else if (countryLower.includes('japan')) {
                providers = [
                    {
                        name: 'GMO Payment Gateway',
                        description: 'Leading payment gateway in Japan',
                        fee: '3.25% - 3.65%',
                        setupTime: '2-3 weeks'
                    },
                    {
                        name: 'PayPay for Business',
                        description: 'QR code payment integration',
                        fee: '1.98% (regular), 1.60% (PayPay exclusive)',
                        setupTime: '1-2 weeks'
                    },
                    {
                        name: 'Stripe Japan',
                        description: 'International platform with Japan support',
                        fee: '3.6%',
                        setupTime: '1-2 weeks'
                    },
                    {
                        name: 'SoftBank Payment Service',
                        description: 'Comprehensive payment solutions',
                        fee: 'Custom pricing',
                        setupTime: '3-4 weeks'
                    }
                ];
            } else if (countryLower.includes('africa') || countryLower.includes('kenya') || 
                       countryLower.includes('nigeria') || countryLower.includes('south africa')) {
                const nigerianProviders = [
                    { name: 'Flutterwave', fee: '1.4% + ‚Ç¶0.20 (local cards)', desc: 'Pan-African payment gateway' },
                    { name: 'Paystack', fee: '1.5% + ‚Ç¶100', desc: 'Stripe-backed Nigerian gateway' },
                    { name: 'Interswitch', fee: 'Custom pricing', desc: 'Major payment processor in Nigeria' }
                ];
                const kenyanProviders = [
                    { name: 'M-Pesa Integration', fee: 'B2C: KSh 0.30 - 30 per transaction', desc: 'Mobile money platform' },
                    { name: 'Flutterwave', fee: '1.4% + KSh 20', desc: 'Pan-African payment gateway' },
                    { name: 'Pesapal', fee: '2% - 3.5%', desc: 'East African payment gateway' }
                ];
                
                const localProviders = countryLower.includes('nigeria') ? nigerianProviders : kenyanProviders;
                providers = localProviders.map(p => ({
                    name: p.name,
                    description: p.desc,
                    fee: p.fee,
                    setupTime: '1-3 weeks'
                }));
            } else {
                // Default to US/North America
                providers = [
                    {
                        name: 'Stripe',
                        description: 'Industry-leading payment API with global coverage',
                        fee: '2.9% + $0.30 per transaction',
                        setupTime: '1-2 weeks'
                    },
                    {
                        name: 'PayPal / Braintree',
                        description: 'Trusted payment processor with buyer protection',
                        fee: '2.9% + $0.30 (PayPal), 2.59% + $0.49 (Braintree)',
                        setupTime: '1-3 weeks'
                    },
                    {
                        name: 'Square',
                        description: 'All-in-one payment solution for businesses',
                        fee: '2.6% + $0.10 per transaction',
                        setupTime: '1 week'
                    },
                    {
                        name: 'Authorize.net',
                        description: 'Established payment gateway',
                        fee: '2.9% + $0.30 + $25/month',
                        setupTime: '1-2 weeks'
                    }
                ];
            }
            
            // Country-specific compliance requirements
            let complianceReqs = [
                {
                    requirement: 'Business Registration',
                    details: `Valid business entity registered in ${country} with tax ID/EIN`,
                    priority: 'Critical'
                },
                {
                    requirement: 'KYC Documentation',
                    details: 'Business verification documents, beneficial ownership info, bank statements',
                    priority: 'Critical'
                },
                {
                    requirement: 'AML/CFT Compliance',
                    details: 'Anti-Money Laundering and Counter-Financing of Terrorism policies',
                    priority: 'Critical'
                }
            ];
            
            // Add country-specific data privacy compliance
            if (countryLower.includes('india')) {
                complianceReqs.push({
                    requirement: 'RBI Compliance & Data Localization',
                    details: 'Reserve Bank of India guidelines for payment aggregators, mandatory data storage in India',
                    priority: 'Critical'
                });
                complianceReqs.push({
                    requirement: 'Payment Aggregator License (PA-CB)',
                    details: 'RBI authorization required for payment aggregation (if transaction volume >50 lakhs/year)',
                    priority: 'Critical'
                });
            } else if (countryLower.includes('eu') || countryLower.includes('europe') || 
                       countryLower.includes('uk') || countryLower.includes('germany') || 
                       countryLower.includes('france')) {
                complianceReqs.push({
                    requirement: 'GDPR Compliance',
                    details: 'General Data Protection Regulation for EU customer data protection',
                    priority: 'Critical'
                });
                complianceReqs.push({
                    requirement: 'PSD2 Compliance',
                    details: 'Payment Services Directive 2 - Strong Customer Authentication (SCA) required',
                    priority: 'Critical'
                });
                if (!countryLower.includes('uk')) {
                    complianceReqs.push({
                        requirement: 'E-Money or Payment Institution License',
                        details: 'EU licensing required depending on services offered and transaction volume',
                        priority: 'Critical'
                    });
                }
            } else if (countryLower.includes('china')) {
                complianceReqs.push({
                    requirement: 'PBOC Payment License',
                    details: 'People\'s Bank of China license required for payment services',
                    priority: 'Critical'
                });
                complianceReqs.push({
                    requirement: 'China Data Protection Laws',
                    details: 'Personal Information Protection Law (PIPL) compliance for data handling',
                    priority: 'Critical'
                });
            } else if (countryLower.includes('brazil')) {
                complianceReqs.push({
                    requirement: 'LGPD Compliance',
                    details: 'Lei Geral de Prote√ß√£o de Dados - Brazil\'s data protection law',
                    priority: 'Critical'
                });
                complianceReqs.push({
                    requirement: 'Central Bank Authorization',
                    details: 'Banco Central do Brasil registration for payment institutions',
                    priority: 'Critical'
                });
            } else {
                // US and other countries
                complianceReqs.push({
                    requirement: 'Data Privacy Compliance',
                    details: countryLower.includes('california') ? 
                        'CCPA (California Consumer Privacy Act) compliance required' :
                        'State-specific data protection regulations (varies by region)',
                    priority: 'Important'
                });
                if (countryLower.includes('us') || countryLower.includes('united states') || 
                    countryLower.includes('america')) {
                    complianceReqs.push({
                        requirement: 'Money Transmitter Licenses',
                        details: 'State-by-state MTL licenses required (varies by state, can take 6-18 months)',
                        priority: 'Critical'
                    });
                }
            }
            
            // Common compliance items
            complianceReqs.push(
                {
                    requirement: 'Terms of Service & Privacy Policy',
                    details: 'Clear customer-facing legal documents covering payment terms and data usage',
                    priority: 'Important'
                },
                {
                    requirement: 'Dispute Resolution Process',
                    details: 'Chargeback handling procedures and customer dispute management',
                    priority: 'Important'
                }
            );

            return {
                providers: providers,
                technicalReqs: [
                    {
                        requirement: 'API Integration',
                        details: 'RESTful API integration with webhooks for payment notifications and status updates'
                    },
                    {
                        requirement: 'PCI DSS Compliance',
                        details: 'Payment Card Industry Data Security Standard certification (Level 1 or 2 depending on volume)'
                    },
                    {
                        requirement: 'Secure Hosting',
                        details: 'SSL/TLS encryption, secure server infrastructure with regular security audits'
                    },
                    {
                        requirement: 'Testing Environment',
                        details: 'Sandbox/test mode for development and testing before going live'
                    },
                    {
                        requirement: 'Error Handling & Logging',
                        details: 'Robust error handling, transaction logging, and monitoring systems'
                    }
                ],
                complianceReqs: complianceReqs,
                financialReqs: [
                    {
                        requirement: 'Business Bank Account',
                        details: `Merchant account in ${country} for settlement of funds`
                    },
                    {
                        requirement: 'Reserve Requirements',
                        details: 'Some providers require holding 5-10% of transaction volume as reserve'
                    },
                    {
                        requirement: 'Minimum Transaction Volume',
                        details: countryLower.includes('india') ? 
                            'Some partners require minimum monthly volume (‚Çπ5L-‚Çπ10L+)' :
                            countryLower.includes('brazil') ?
                            'Some partners require minimum monthly volume (R$20k-R$50k+)' :
                            'Some partners require minimum monthly volume ($5k-$10k+)'
                    },
                    {
                        requirement: 'Credit Check',
                        details: 'Business credit check and risk assessment by payment provider'
                    },
                    {
                        requirement: 'Insurance',
                        details: 'Cyber liability insurance and errors & omissions coverage recommended'
                    },
                    {
                        requirement: 'Settlement Period',
                        details: countryLower.includes('india') ? 
                            'Typical payout: T+1 to T+3 days (UPI/IMPS), T+3 to T+7 (cards)' :
                            'Typical payout: T+2 to T+7 days (varies by provider and risk profile)'
                    }
                ]
            };
        }

        function generateMarketGrowthData(marketSize, growthRate) {
            // Extract growth rate percentage
            const growthMatch = growthRate.match(/(\d+)/);
            const growth = growthMatch ? parseInt(growthMatch[0]) / 100 : 0.08;
            
            const baseSize = parseFloat(marketSize);
            const years = ['2024', '2025', '2026', '2027', '2028', '2029'];
            const values = [];
            
            for (let i = 0; i < years.length; i++) {
                values.push((baseSize * Math.pow(1 + growth, i)).toFixed(1));
            }
            
            return {
                labels: years,
                values: values
            };
        }

        function parseAnalysis(text) {
            const sections = {
                score: 50,
                scoreReasoning: 'Analysis based on AI evaluation',
                marketAnalysis: '',
                revenueAnalysis: '',
                competitionAnalysis: '',
                examplesAnalysis: '',
                startupGuide: '',
                riskFactors: ''
            };

            // Extract score
            const scoreMatch = text.match(/SCORE:\s*(\d+)/i);
            if (scoreMatch) {
                sections.score = parseInt(scoreMatch[1]);
            }

            // Extract score reasoning
            const reasoningMatch = text.match(/SCORE_REASONING:\s*(.+?)(?=\n\n|\n[A-Z_]+:)/s);
            if (reasoningMatch) {
                sections.scoreReasoning = reasoningMatch[1].trim();
            }

            // Extract other sections with flexible matching
            const marketMatch = text.match(/MARKET_ANALYSIS:?\s*(.+?)(?=\n\n[A-Z_]+:|$)/s);
            if (marketMatch) sections.marketAnalysis = marketMatch[1].trim();

            const revenueMatch = text.match(/REVENUE_POTENTIAL:?\s*(.+?)(?=\n\n[A-Z_]+:|$)/s);
            if (revenueMatch) sections.revenueAnalysis = revenueMatch[1].trim();

            const competitionMatch = text.match(/COMPETITION:?\s*(.+?)(?=\n\n[A-Z_]+:|$)/s);
            if (competitionMatch) sections.competitionAnalysis = competitionMatch[1].trim();

            const examplesMatch = text.match(/EXAMPLES:?\s*(.+?)(?=\n\n[A-Z_]+:|$)/s);
            if (examplesMatch) sections.examplesAnalysis = examplesMatch[1].trim();

            const startupMatch = text.match(/STARTUP_GUIDE:?\s*(.+?)(?=\n\n[A-Z_]+:|$)/s);
            if (startupMatch) sections.startupGuide = startupMatch[1].trim();

            const risksMatch = text.match(/RISKS:?\s*(.+?)$/s);
            if (risksMatch) sections.riskFactors = risksMatch[1].trim();

            return sections;
        }

        function displayResults(analysis) {
            results.classList.remove('hidden');

            // Animate score circle
            const scoreValue = document.getElementById('scoreValue');
            const scoreCircle = document.getElementById('scoreCircle');
            const scoreInterpretation = document.getElementById('scoreInterpretation');
            
            const score = Math.min(100, Math.max(0, analysis.score));
            const circumference = 552.92;
            const offset = circumference - (score / 100) * circumference;
            
            scoreValue.textContent = score;
            scoreCircle.style.strokeDashoffset = offset;
            
            // Color coding
            if (score >= 70) {
                scoreCircle.style.stroke = '#10b981';
                scoreInterpretation.innerHTML = `<span class="text-green-600">‚úì High Success Probability</span><br><span class="text-sm mt-2 block">${analysis.scoreReasoning}</span>`;
            } else if (score >= 50) {
                scoreCircle.style.stroke = '#f59e0b';
                scoreInterpretation.innerHTML = `<span class="text-amber-600">‚ö† Moderate Success Probability</span><br><span class="text-sm mt-2 block">${analysis.scoreReasoning}</span>`;
            } else {
                scoreCircle.style.stroke = '#ef4444';
                scoreInterpretation.innerHTML = `<span class="text-red-600">‚ö† Low Success Probability</span><br><span class="text-sm mt-2 block">${analysis.scoreReasoning}</span>`;
            }

            // Populate market metrics
            document.getElementById('marketSize').textContent = analysis.metrics.marketSize;
            document.getElementById('growthRate').textContent = analysis.metrics.growthRate;
            document.getElementById('targetShare').textContent = analysis.metrics.targetShare;

            // Create market growth chart
            createMarketGrowthChart(analysis.metrics.marketGrowthData);

            // --- NEW CHARTS ---
            createMarketShareCharts(analysis.competitors, analysis.businessIdea, analysis.country);
            createRadarChart(analysis.competitors, analysis.businessIdea);
            createCacLtvChart(analysis.metrics, analysis.businessIdea);
            createBubbleChart(analysis.businessIdea);
            createRiskChart(analysis.metrics, analysis.businessIdea);
            createCustomerGrowthChart(analysis.metrics.customerGrowth);

            // Populate startup costs
            const startupCostsEl = document.getElementById('startupCosts');
            startupCostsEl.innerHTML = analysis.metrics.startupCosts.map(item => `
                <div class="flex justify-between items-center p-3 bg-gray-100 rounded">
                    <span class="text-sm text-gray-700">${item.category}</span>
                    <span class="font-semibold text-gray-900">${item.amount}</span>
                </div>
            `).join('');
            document.getElementById('totalStartup').textContent = analysis.metrics.totalStartup;

            // Create startup costs pie chart
            createStartupCostsChart(analysis.metrics.startupCosts);

            // Create revenue projection chart
            createRevenueChart(analysis.metrics.revenueProjections);

            // Populate revenue table
            const revenueTable = document.getElementById('revenueTable');
            revenueTable.innerHTML = analysis.metrics.revenueProjections.map(row => `
                <tr class="border-b border-gray-100">
                    <td class="px-4 py-3 font-medium text-gray-700">${row.period}</td>
                    <td class="px-4 py-3 text-right text-green-700">${row.revenue}</td>
                    <td class="px-4 py-3 text-right text-red-700">${row.expenses}</td>
                    <td class="px-4 py-3 text-right font-semibold ${row.netProfit.startsWith('-') ? 'text-red-600' : 'text-green-600'}">${row.netProfit}</td>
                    <td class="px-4 py-3 text-right text-gray-700">${row.margin}</td>
                </tr>
            `).join('');

            // Populate financial metrics
            document.getElementById('breakEven').textContent = analysis.metrics.breakEven;
            document.getElementById('year3Revenue').textContent = analysis.metrics.year3Revenue;
            document.getElementById('roi').textContent = analysis.metrics.roi;

            // Populate competition metrics
            document.getElementById('competitorCount').textContent = analysis.metrics.competitorCount;
            document.getElementById('marketSaturation').textContent = analysis.metrics.marketSaturation;
            document.getElementById('entryBarrier').textContent = analysis.metrics.entryBarrier;
            document.getElementById('competitiveAdvantage').textContent = analysis.metrics.competitiveAdvantage;

            // Populate key competitors
            const keyCompetitorsEl = document.getElementById('keyCompetitors');
            keyCompetitorsEl.innerHTML = analysis.competitors.map(comp => `
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                    <div class="flex items-start justify-between mb-2">
                        <div class="font-semibold text-gray-800">${comp.name}</div>
                        <div class="text-xs px-2 py-1 rounded ${
                            comp.type === 'Direct' ? 'bg-red-100 text-red-800' : 
                            comp.type === 'Indirect' ? 'bg-yellow-100 text-yellow-800' : 
                            'bg-blue-100 text-blue-800'
                        }">${comp.type}</div>
                    </div>
                    <div class="text-sm text-gray-600 mb-2">${comp.description}</div>
                    <div class="flex items-center justify-between text-xs">
                        <span class="text-gray-500">Market Share: ${comp.marketShare}</span>
                        <span class="font-medium ${
                            comp.strength === 'Strong' ? 'text-red-600' : 
                            comp.strength === 'Moderate' ? 'text-yellow-600' : 
                            'text-green-600'
                        }">${comp.strength}</span>
                    </div>
                </div>
            `).join('');

            // Populate differentiation strategy
            document.getElementById('differentiationStrategy').innerHTML = 
                analysis.differentiation.map(item => `
                    <div class="flex items-start mb-3 last:mb-0">
                        <div class="text-indigo-600 mr-2 mt-1">‚úì</div>
                        <div class="text-sm text-gray-700">${item}</div>
                    </div>
                `).join('');

            // Populate customer metrics
            document.getElementById('cac').textContent = analysis.metrics.cac;
            document.getElementById('ltv').textContent = analysis.metrics.ltv;
            document.getElementById('ltvCacRatio').textContent = analysis.metrics.ltvCacRatio;

            // Populate customer growth
            const customerGrowth = document.getElementById('customerGrowth');
            customerGrowth.innerHTML = analysis.metrics.customerGrowth.map(item => `
                <div class="flex items-center">
                    <div class="w-32 text-sm text-gray-600">${item.period}</div>
                    <div class="flex-1 bg-gray-200 rounded-full h-6 relative">
                        <div class="bg-indigo-600 h-6 rounded-full flex items-center justify-end pr-3" 
                             style="width: ${item.percentage}%">
                            <span class="text-xs text-white font-semibold">${item.customers}</span>
                        </div>
                    </div>
                </div>
            `).join('');

            // Show payment partnership section if applicable
            if (analysis.isPaymentBusiness) {
                document.getElementById('paymentPartnership').classList.remove('hidden');
                populatePaymentPartnership(analysis.paymentPartnership);
            }

            // Populate resources sections
            populateResourceCard('technologyTools', analysis.resources.technology);
            populateResourceCard('physicalResources', analysis.resources.physical);
            populateResourceCard('marketingChannels', analysis.resources.marketing);
            
            // Populate human resources
            const humanResourcesEl = document.getElementById('humanResources');
            humanResourcesEl.innerHTML = analysis.resources.human.map(item => `
                <div class="flex items-start p-3 bg-purple-50 rounded-lg">
                    <div class="flex-1">
                        <div class="font-medium text-gray-800">${item.role}</div>
                        <div class="text-sm text-gray-600">${item.description}</div>
                    </div>
                    <div class="text-xs px-2 py-1 rounded bg-purple-200 text-purple-800 ml-2">${item.timing}</div>
                </div>
            `).join('');

            // Populate legal requirements
            const legalRequirementsEl = document.getElementById('legalRequirements');
            legalRequirementsEl.innerHTML = analysis.resources.legal.map(item => `
                <div class="flex items-start p-3 bg-red-50 rounded-lg">
                    <div class="flex-1">
                        <div class="font-medium text-gray-800">${item.requirement}</div>
                        <div class="text-sm text-gray-600">${item.details}</div>
                    </div>
                    <div class="text-xs px-2 py-1 rounded ${
                        item.priority === 'Critical' ? 'bg-red-200 text-red-800' : 
                        item.priority === 'Important' ? 'bg-orange-200 text-orange-800' : 
                        'bg-yellow-200 text-yellow-800'
                    } ml-2">${item.priority}</div>
                </div>
            `).join('');

            // Populate text sections with formatting
            document.getElementById('marketAnalysis').innerHTML = formatText(analysis.marketAnalysis || 'Analysis not available');
            document.getElementById('revenueAnalysis').innerHTML = formatText(analysis.revenueAnalysis || 'Analysis not available');
            document.getElementById('competitionAnalysis').innerHTML = formatText(analysis.competitionAnalysis || 'Analysis not available');
            document.getElementById('examplesAnalysis').innerHTML = formatText(analysis.examplesAnalysis || 'Analysis not available');
            document.getElementById('startupGuide').innerHTML = formatText(analysis.startupGuide || 'Analysis not available');
            document.getElementById('riskFactors').innerHTML = formatText(analysis.riskFactors || 'Analysis not available');

            // Scroll to results
            results.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function populateResourceCard(elementId, items) {
            const el = document.getElementById(elementId);
            el.innerHTML = items.map(item => `
                <div class="flex items-start p-3 bg-gray-50 rounded-lg border border-gray-200">
                    <div class="flex-1">
                        <div class="font-medium text-gray-800 text-sm">${item.name}</div>
                        <div class="text-xs text-gray-600 mt-1">${item.purpose}</div>
                    </div>
                    <div class="text-xs text-gray-500 ml-2">${item.cost}</div>
                </div>
            `).join('');
        }

        function formatText(text) {
            // Convert line breaks to paragraphs
            return text
                .split('\n\n')
                .map(para => `<p class="mb-3">${para.replace(/\n/g, '<br>')}</p>`)
                .join('');
        }

        function showError(message) {
            error.classList.remove('hidden');
            document.getElementById('errorMessage').textContent = message;
            error.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Chart creation functions
        let marketGrowthChartInstance = null;
        let revenueChartInstance = null;
        let startupCostsChartInstance = null;

        function createMarketGrowthChart(data) {
            const ctx = document.getElementById('marketGrowthChart').getContext('2d');
            
            // Destroy existing chart if it exists
            if (marketGrowthChartInstance) {
                marketGrowthChartInstance.destroy();
            }
            
            marketGrowthChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [{
                        label: 'Market Size (Billions)',
                        data: data.values,
                        borderColor: 'rgb(79, 70, 229)',
                        backgroundColor: 'rgba(79, 70, 229, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value + 'B';
                                }
                            }
                        }
                    }
                }
            });
        }

        function createRevenueChart(projections) {
            const ctx = document.getElementById('revenueChart').getContext('2d');
            
            // Destroy existing chart if it exists
            if (revenueChartInstance) {
                revenueChartInstance.destroy();
            }
            
            const labels = projections.map(p => p.period);
            const revenue = projections.map(p => parseInt(p.revenue.replace(/[$,]/g, '')));
            const expenses = projections.map(p => parseInt(p.expenses.replace(/[$,]/g, '')));
            const profit = projections.map(p => {
                const val = p.netProfit.replace(/[$,]/g, '');
                return val.startsWith('-') ? -parseInt(val.substring(1)) : parseInt(val);
            });

            revenueChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Revenue',
                            data: revenue,
                            borderColor: 'rgb(34, 197, 94)',
                            backgroundColor: 'rgba(34, 197, 94, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Expenses',
                            data: expenses,
                            borderColor: 'rgb(239, 68, 68)',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Net Profit',
                            data: profit,
                            borderColor: 'rgb(99, 102, 241)',
                            backgroundColor: 'rgba(99, 102, 241, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { position: 'top' }
                    },
                    scales: {
                        y: {
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }

        function createStartupCostsChart(costs) {
            const ctx = document.getElementById('startupCostsChart').getContext('2d');
            
            // Destroy existing chart if it exists
            if (startupCostsChartInstance) {
                startupCostsChartInstance.destroy();
            }
            
            const labels = costs.map(c => c.category);
            const data = costs.map(c => {
                const amounts = c.amount.replace(/[$,]/g, '').split(' - ');
                return parseInt(amounts[0]);
            });

            startupCostsChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: [
                            'rgb(99, 102, 241)',
                            'rgb(139, 92, 246)',
                            'rgb(236, 72, 153)',
                            'rgb(251, 146, 60)',
                            'rgb(34, 197, 94)',
                            'rgb(14, 165, 233)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { position: 'bottom', labels: { boxWidth: 12, font: { size: 10 } } }
                    }
                }
            });
        }

        function populatePaymentPartnership(partnership) {
            // Payment providers
            const providersEl = document.getElementById('paymentProviders');
            providersEl.innerHTML = partnership.providers.map(p => `
                <div class="border border-gray-200 rounded-lg p-4">
                    <div class="font-semibold text-gray-800 mb-2">${p.name}</div>
                    <div class="text-xs text-gray-600 mb-2">${p.description}</div>
                    <div class="flex items-center justify-between text-xs">
                        <span class="text-gray-500">Processing Fee:</span>
                        <span class="font-medium text-gray-800">${p.fee}</span>
                    </div>
                    <div class="flex items-center justify-between text-xs mt-1">
                        <span class="text-gray-500">Setup Time:</span>
                        <span class="font-medium text-gray-800">${p.setupTime}</span>
                    </div>
                </div>
            `).join('');

            // Technical requirements
            const technicalEl = document.getElementById('technicalReqs');
            technicalEl.innerHTML = partnership.technicalReqs.map(req => `
                <div class="flex items-start p-3 bg-blue-50 rounded-lg">
                    <div class="flex-1">
                        <div class="font-medium text-gray-800">${req.requirement}</div>
                        <div class="text-sm text-gray-600">${req.details}</div>
                    </div>
                </div>
            `).join('');

            // Compliance requirements
            const complianceEl = document.getElementById('complianceReqs');
            complianceEl.innerHTML = partnership.complianceReqs.map(req => `
                <div class="flex items-start p-3 bg-yellow-50 rounded-lg">
                    <div class="flex-1">
                        <div class="font-medium text-gray-800">${req.requirement}</div>
                        <div class="text-sm text-gray-600">${req.details}</div>
                    </div>
                    <div class="text-xs px-2 py-1 rounded bg-yellow-200 text-yellow-800 ml-2">${req.priority}</div>
                </div>
            `).join('');

            // Financial requirements
            const financialEl = document.getElementById('financialReqs');
            financialEl.innerHTML = partnership.financialReqs.map(req => `
                <div class="flex items-start p-3 bg-green-50 rounded-lg">
                    <div class="flex-1">
                        <div class="font-medium text-gray-800">${req.requirement}</div>
                        <div class="text-sm text-gray-600">${req.details}</div>
                    </div>
                </div>
            `).join('');
        }

        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        // NEW VISUALIZATION FUNCTIONS
        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

        let marketSharePieInstance, marketShareBarInstance, radarChartInstance,
            cacLtvChartInstance, bubbleChartInstance, riskChartInstance, customerGrowthInstance;

        function destroyChart(instance) { if (instance) instance.destroy(); }

        // 1. Market Share Pie + Bar Charts
        function createMarketShareCharts(competitors, idea, country) {
            destroyChart(marketSharePieInstance);
            destroyChart(marketShareBarInstance);
            if (!competitors || competitors.length === 0) return;

            const top8 = competitors.slice(0, 8);
            const labels = top8.map(c => c.name.length > 18 ? c.name.substring(0,16)+'‚Ä¶' : c.name);
            const shares = top8.map(c => {
                const m = c.marketShare.match(/(\d+)/);
                return m ? parseInt(m[1]) : 5;
            });
            const palette = ['#6366f1','#10b981','#f59e0b','#ef4444','#3b82f6','#8b5cf6','#ec4899','#14b8a6'];

            // Pie
            const pie = document.getElementById('marketSharePieChart').getContext('2d');
            marketSharePieInstance = new Chart(pie, {
                type: 'doughnut',
                data: { labels, datasets: [{ data: shares, backgroundColor: palette, borderWidth: 2, borderColor: '#fff' }] },
                options: {
                    responsive: true, maintainAspectRatio: true,
                    plugins: { legend: { position: 'bottom', labels: { font: { size: 10 }, boxWidth: 12 } },
                        title: { display: true, text: 'Market Share Distribution', font: { size: 13, weight: 'bold' } }
                    }
                }
            });

            // Bar
            const bar = document.getElementById('marketShareBarChart').getContext('2d');
            marketShareBarInstance = new Chart(bar, {
                type: 'bar',
                data: {
                    labels,
                    datasets: [{
                        label: 'Market Share %',
                        data: shares,
                        backgroundColor: palette,
                        borderRadius: 6
                    }]
                },
                options: {
                    indexAxis: 'y', responsive: true, maintainAspectRatio: true,
                    plugins: { legend: { display: false },
                        title: { display: true, text: 'Competitor Share (%) ‚Äî ' + country, font: { size: 12, weight: 'bold' } }
                    },
                    scales: { x: { beginAtZero: true, ticks: { font: { size: 10 } } }, y: { ticks: { font: { size: 10 } } } }
                }
            });
        }

        // 2. Radar Chart ‚Äî You vs Top 3 Competitors
        function createRadarChart(competitors, idea) {
            destroyChart(radarChartInstance);
            const dims = ['Brand', 'Price', 'Tech', 'Scale', 'Service', 'Growth'];
            const you = [55, 70, 65, 30, 75, 80];
            const top3 = (competitors || []).slice(0, 3);
            const compData = [
                [85, 60, 80, 90, 70, 65],
                [75, 50, 70, 80, 80, 55],
                [65, 80, 60, 70, 65, 50]
            ];
            const colors = ['rgba(99,102,241,0.25)', 'rgba(239,68,68,0.2)', 'rgba(16,185,129,0.2)', 'rgba(245,158,11,0.2)'];
            const borders = ['#6366f1','#ef4444','#10b981','#f59e0b'];

            const datasets = [
                { label: 'You', data: you, borderColor: borders[0], backgroundColor: colors[0], borderWidth: 2, pointRadius: 4 },
                ...top3.map((c, i) => ({
                    label: c.name.length > 14 ? c.name.substring(0, 12) + '‚Ä¶' : c.name,
                    data: compData[i],
                    borderColor: borders[i+1], backgroundColor: colors[i+1], borderWidth: 1.5, pointRadius: 3
                }))
            ];

            const ctx = document.getElementById('radarChart').getContext('2d');
            radarChartInstance = new Chart(ctx, {
                type: 'radar',
                data: { labels: dims, datasets },
                options: {
                    responsive: true, maintainAspectRatio: true,
                    plugins: { legend: { position: 'bottom', labels: { font: { size: 10 }, boxWidth: 10 } } },
                    scales: { r: { min: 0, max: 100, ticks: { stepSize: 20, font: { size: 9 } }, pointLabels: { font: { size: 11, weight: 'bold' } } } }
                }
            });

            // Radar legend
            document.getElementById('radarLegend').innerHTML = `
                <p class="text-xs font-semibold text-gray-700 mb-3">Score Guide (0‚Äì100)</p>
                ${dims.map((d, i) => `
                    <div class="flex items-center justify-between py-1 border-b border-gray-100">
                        <span class="text-sm text-gray-600">${d}</span>
                        <span class="text-sm font-bold" style="color:#6366f1">${you[i]}</span>
                    </div>
                `).join('')}
                <p class="text-xs text-gray-400 mt-3">Your estimated scores vs competitors.<br>Improve low scores to close competitive gaps.</p>
            `;
        }

        // 3. CAC vs LTV Benchmark bar chart
        function createCacLtvChart(metrics, idea) {
            destroyChart(cacLtvChartInstance);
            const ideaLower = (idea || '').toLowerCase();
            const sectors = ['Payment','Energy','Healthcare','Real Estate','SaaS','E-commerce','Food','Logistics'];
            const cacVals  = [45, 35, 60, 95, 90, 30, 15, 22];
            const ltvVals  = [950, 5200, 1800, 10500, 1200, 360, 180, 320];

            // Highlight current sector
            const sectorIdx = ideaLower.includes('payment')||ideaLower.includes('fintech') ? 0 :
                              ideaLower.includes('gas')||ideaLower.includes('energy') ? 1 :
                              ideaLower.includes('health')||ideaLower.includes('medical') ? 2 :
                              ideaLower.includes('real estate')||ideaLower.includes('property') ? 3 :
                              ideaLower.includes('saas')||ideaLower.includes('software') ? 4 :
                              ideaLower.includes('ecommerce')||ideaLower.includes('shop') ? 5 :
                              ideaLower.includes('food')||ideaLower.includes('restaurant')||ideaLower.includes('coffee') ? 6 :
                              ideaLower.includes('logistic')||ideaLower.includes('delivery') ? 7 : -1;

            const cacColors = sectors.map((_, i) => i === sectorIdx ? '#6366f1' : '#c7d2fe');
            const ltvColors = sectors.map((_, i) => i === sectorIdx ? '#10b981' : '#a7f3d0');

            const ctx = document.getElementById('cacLtvChart').getContext('2d');
            cacLtvChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: sectors,
                    datasets: [
                        { label: 'CAC ($)', data: cacVals, backgroundColor: cacColors, borderRadius: 4, yAxisID: 'y' },
                        { label: 'LTV ($)', data: ltvVals.map(v => v/10), backgroundColor: ltvColors, borderRadius: 4, yAxisID: 'y' }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: true,
                    plugins: {
                        legend: { position: 'top' },
                        title: { display: true, text: 'CAC vs LTV/10 by Sector ‚Äî highlighted = yours', font: { size: 12 } },
                        tooltip: {
                            callbacks: {
                                label: (ctx) => ctx.datasetIndex === 1
                                    ? `LTV: $${ltvVals[ctx.dataIndex].toLocaleString()}`
                                    : `CAC: $${cacVals[ctx.dataIndex]}`
                            }
                        }
                    },
                    scales: { y: { beginAtZero: true, ticks: { font: { size: 10 } } }, x: { ticks: { font: { size: 10 } } } }
                }
            });
        }

        // 4. Bubble Chart ‚Äî Sector Opportunity Map
        function createBubbleChart(idea) {
            destroyChart(bubbleChartInstance);
            const ideaLower = (idea||'').toLowerCase();
            const sectors = [
                { label: 'Payment', x: 72, y: 68, r: 18 },
                { label: 'Energy', x: 55, y: 40, r: 28 },
                { label: 'Healthcare', x: 78, y: 58, r: 22 },
                { label: 'Real Estate', x: 60, y: 52, r: 24 },
                { label: 'SaaS', x: 80, y: 70, r: 16 },
                { label: 'E-commerce', x: 65, y: 75, r: 20 },
                { label: 'Food', x: 50, y: 62, r: 14 },
                { label: 'Logistics', x: 58, y: 55, r: 18 },
                { label: 'AI/ML', x: 88, y: 80, r: 12 },
                { label: 'EdTech', x: 70, y: 65, r: 10 }
            ];

            const isYours = (s) => {
                const n = s.label.toLowerCase();
                return (n.includes('payment') && (ideaLower.includes('payment')||ideaLower.includes('fintech'))) ||
                       (n.includes('energy') && (ideaLower.includes('gas')||ideaLower.includes('energy'))) ||
                       (n.includes('health') && (ideaLower.includes('health')||ideaLower.includes('medical'))) ||
                       (n.includes('real') && (ideaLower.includes('real estate'))) ||
                       (n.includes('saas') && (ideaLower.includes('saas')||ideaLower.includes('software'))) ||
                       (n.includes('ecom') && (ideaLower.includes('ecommerce')||ideaLower.includes('shop'))) ||
                       (n.includes('food') && (ideaLower.includes('food')||ideaLower.includes('coffee')||ideaLower.includes('restaurant'))) ||
                       (n.includes('logist') && (ideaLower.includes('logist')||ideaLower.includes('delivery'))) ||
                       (n.includes('ai') && (ideaLower.includes('ai')||ideaLower.includes('machine')));
            };

            const ctx = document.getElementById('bubbleChart').getContext('2d');
            bubbleChartInstance = new Chart(ctx, {
                type: 'bubble',
                data: {
                    datasets: sectors.map(s => ({
                        label: s.label,
                        data: [{ x: s.x, y: s.y, r: s.r }],
                        backgroundColor: isYours(s) ? 'rgba(99,102,241,0.7)' : 'rgba(16,185,129,0.35)',
                        borderColor: isYours(s) ? '#6366f1' : '#10b981',
                        borderWidth: isYours(s) ? 3 : 1
                    }))
                },
                options: {
                    responsive: true, maintainAspectRatio: true,
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: 'Sector Map ‚Äî X: Market Opportunity | Y: Growth Rate | Size: Market Size (purple = your sector)', font: { size: 11 } },
                        tooltip: { callbacks: { label: (c) => ` ${c.dataset.label}: Opportunity ${c.raw.x}, Growth ${c.raw.y}` } }
                    },
                    scales: {
                        x: { min: 30, max: 100, title: { display: true, text: 'Market Opportunity Score ‚Üí' }, ticks: { font: { size: 10 } } },
                        y: { min: 20, max: 95, title: { display: true, text: 'Growth Rate Score ‚Üí' }, ticks: { font: { size: 10 } } }
                    }
                }
            });
        }

        // 5. Risk Factor Bar Chart
        function createRiskChart(metrics, idea) {
            destroyChart(riskChartInstance);
            const ideaLower = (idea||'').toLowerCase();
            const isFood = ideaLower.includes('food')||ideaLower.includes('coffee')||ideaLower.includes('restaurant');
            const isTech = ideaLower.includes('tech')||ideaLower.includes('saas')||ideaLower.includes('software')||ideaLower.includes('ai');
            const isEnergy = ideaLower.includes('gas')||ideaLower.includes('energy');
            const isHealth = ideaLower.includes('health')||ideaLower.includes('medical');

            const riskData = isFood
                ? [75, 60, 40, 55, 70, 50, 30]
                : isTech
                ? [40, 80, 55, 45, 35, 65, 70]
                : isEnergy
                ? [50, 45, 85, 80, 40, 60, 35]
                : isHealth
                ? [55, 60, 90, 70, 45, 65, 50]
                : [55, 65, 60, 60, 50, 60, 50];

            const riskLabels = ['Competition','Capital Needs','Regulation','Operations','Market Timing','Tech Risk','Talent Risk'];
            const riskColors = riskData.map(v => v >= 70 ? '#ef4444' : v >= 50 ? '#f59e0b' : '#10b981');

            const ctx = document.getElementById('riskChart').getContext('2d');
            riskChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: riskLabels,
                    datasets: [{
                        label: 'Risk Score (0‚Äì100)',
                        data: riskData,
                        backgroundColor: riskColors,
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: true,
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: 'Risk Factors ‚Äî Red=High, Orange=Medium, Green=Low', font: { size: 12 } }
                    },
                    scales: {
                        y: { min: 0, max: 100, ticks: { font: { size: 10 } } },
                        x: { ticks: { font: { size: 10 } } }
                    }
                }
            });
        }

        // 6. Customer Growth Chart
        function createCustomerGrowthChart(customerGrowth) {
            destroyChart(customerGrowthInstance);
            if (!customerGrowth || !customerGrowth.length) return;
            const ctx = document.getElementById('customerGrowthChart').getContext('2d');
            customerGrowthInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: customerGrowth.map(d => d.period),
                    datasets: [{
                        label: 'Cumulative Customers',
                        data: customerGrowth.map(d => parseInt(d.customers.replace(/,/g,''))),
                        borderColor: '#6366f1',
                        backgroundColor: 'rgba(99,102,241,0.12)',
                        tension: 0.45,
                        fill: true,
                        pointBackgroundColor: '#6366f1',
                        pointRadius: 5,
                        borderWidth: 2.5
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: true,
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: 'Customer Growth Projection', font: { size: 12, weight: 'bold' } }
                    },
                    scales: {
                        y: { beginAtZero: true, ticks: { font: { size: 10 } } },
                        x: { ticks: { font: { size: 10 } } }
                    }
                }
            });
        }
    </script>
</body>
</html>
